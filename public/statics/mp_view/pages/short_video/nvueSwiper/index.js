require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/short_video/nvueSwiper/index"],{"290a":function(t,i,e){"use strict";e.d(i,"b",(function(){return o})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){return n}));var n={uniBadge:function(){return e.e("uni_modules/uni-badge/components/uni-badge/uni-badge").then(e.bind(null,"2440"))},uniPopup:function(){return e.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(e.bind(null,"fc40"))}},o=function(){var t=this,i=t.$createElement,e=(t._self._c,t.dataList.length),n=t.__map(t.dataList,(function(i,e){var n=t.__get_orig(i),o=Math.abs(t.k-e),a=o<=1?i.isMore||i.desc.length<=29:null,s=o<=1&&!a?i.desc.slice(0,29):null;return{$orig:n,g1:o,g2:a,g3:s}}));t._isMounted||(t.e0=function(i){t.H5ShareBox=!1}),t.$mp.data=Object.assign({},{$root:{g0:e,l0:n}})},a=[]},"34f0":function(t,i,e){"use strict";(function(t){var n=e("4ea4");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;e("d5f7");var o=e("26cb"),a=e("5f9b"),s=e("a212"),u=e("79c7"),d=(n(e("e338")),getApp()),c={components:{douyinScrollview:function(){Promise.all([e.e("pages/short_video/common/vendor"),e.e("pages/short_video/components/douyin-scrollview/douyin-scrollview")]).then(function(){return resolve(e("71e9"))}.bind(null,e)).catch(e.oe)},goodsList:function(){Promise.all([e.e("common/vendor"),e.e("pages/short_video/components/goodsList/index")]).then(function(){return resolve(e("e7ab"))}.bind(null,e)).catch(e.oe)}},computed:(0,o.mapGetters)(["isLogin","uid","cartNum"]),data:function(){return{imgHost:a.HTTP_REQUEST_URL,videoID:0,pinlunNum:0,windowWidth:0,windowHeight:0,platform:"",deleteHeight:0,isComment:0,dataList:[],k:0,oldVideo:"",voice:"",timeout:"",current:0,boxStyle:{height:0,width:0},heightNum:1.3,touchNum:0,aixinLeft:0,aixinTop:0,isShowAixin:!1,Rotate:0,currentNav:1,limit:3,page:1,oldCurrent:1,H5ShareBox:!1}},watch:{currentNav:function(t,i){this.oldCurrent=i},k:function(i,e){var n=this;if(this.oldCurrent!=this.currentNav)return this.oldCurrent=this.currentNav,!1;this.dataList[e].playIng=!1,this.dataList[e].isplay=!0,this.dataList[e].state="pause",t.createVideoContext(this.dataList[e].id+""+e,this).stop(),this.dataList[i].state="play",setTimeout((function(){t.createVideoContext(n.dataList[i].id+""+i,n).play(),setTimeout((function(){n.dataList[i].isplay=!1,n.dataList[i].playIng=!0}),50)}),250)}},onLoad:function(i){this.videoID=i.id||0,this.getOptions(i),this.platform=t.getSystemInfoSync().platform;var e=t.getSystemInfoSync().model;"ios"!=this.platform||"iPhone6"===e&&"iPhone6s"===e&&"iPhone7"===e&&"iPhone8"===e||(this.deleteHeight=0),this.windowWidth=t.getSystemInfoSync().windowWidth,this.windowHeight=t.getSystemInfoSync().windowHeight-59,this.boxStyle.width=this.windowWidth+"px",this.boxStyle.height=this.windowHeight-this.deleteHeight,this.get(),this.isLogin&&this.getCartNum()},onShow:function(){0!==this.dataList.length&&(this.dataList[this.k].state="play",t.createVideoContext(this.dataList[this.k].id+""+this.k,this).play())},onHide:function(){this.dataList[this.k].state="pause",t.createVideoContext(this.dataList[this.k].id+""+this.k,this).pause()},onReady:function(){},onShareAppMessage:function(){var t=this.uid?this.uid:0,i=this.dataList[this.k];return this.cShare(this.videoID),{title:i.type_name||"",imageUrl:i.image||"",path:"/pages/short_video/nvueSwiper/index?spid="+t+"&id="+this.videoID}},methods:{getCartNum:function(){var t=this;(0,u.getCartCounts)().then((function(i){t.$store.commit("indexData/setCartNum",i.data.count>99?"..":i.data.count+"")}))},goIndex:function(){t.switchTab({url:"/pages/index/index"})},goCarts:function(){t.switchTab({url:"/pages/order_addcart/order_addcart"})},goUser:function(){t.switchTab({url:"/pages/user/index"})},goLive:function(){t.navigateTo({url:"/pages/columnGoods/live_list/index"})},tozuozhe:function(i){0==i.type?t.reLaunch({url:"/pages/index/index"}):t.reLaunch({url:"/pages/store_cate/store_cate?id="+i.relation_id})},getOptions:function(t){if(t.scene){var i=this.$util.getUrlParams(decodeURIComponent(t.scene));i.spid&&(d.globalData.spid=i.spid),i.id&&(this.videoID=i.id||0)}t.spid&&(d.globalData.spid=t.spid)},goCart:function(i){!1!==this.isLogin?(this.$refs.goodsLists.productList(i.id,1),this.$refs.pinglunGoods.open("bottom")):t.showToast({title:"请登录",icon:"none",duration:1e3})},navTap:function(t){this.currentNav=t,this.timeout="",this.k=0,this.page=1,this.dataList=[],this.get()},moreTap:function(t){t.isMore=!t.isMore},moveHandle:function(){},closeScrollview:function(){this.$refs.pinglun.close(),this.isComment=!1},pinlunFun:function(t,i){this.pinlunNum=t,this.dataList.forEach((function(e){e.id==i&&(e.comment_num=t)}))},toComment:function(i){var e=this;this.isComment=!0,t.showToast({title:"加载中...",icon:"none",position:"bottom",duration:300}),this.$nextTick((function(t){e.pinlunNum=i.comment_num,e.$refs.comments.getnewpinlun(i.id,1),e.$refs.pinglun.open("bottom")}))},ended:function(){},touchstartHover:function(t){var i=this;if(this.touchNum>=1){this.aixinLeft=t.touches[0].screenX-50,this.aixinTop=t.touches[0].screenY-50,this.isShowAixin=!0;this.Rotate=Math.floor(81*Math.random())+-40,setTimeout((function(){i.isShowAixin=!1}),700)}},tapVideoHover:function(i,e){var n=this;this.dataList[this.k].isShowimage=!1,this.dataList[this.k].isShowProgressBarTime=!1,this.ProgressBarOpacity=.5,this.dotWidth=0,this.touchNum++,setTimeout((function(){1==n.touchNum&&(n.dataList[n.k].state="play"==i||"continue"==i?"pause":"continue","continue"==n.dataList[n.k].state&&t.createVideoContext(n.dataList[n.k].id+""+n.k,n).play(),"pause"==n.dataList[n.k].state&&t.createVideoContext(n.dataList[n.k].id+""+n.k,n).pause()),n.touchNum>=2&&n.doubleLike(),n.touchNum=0}),200)},doubleLike:function(){0==this.dataList[this.k].is_like&&(this.dataList[this.k].like_num+=1,this.dataList[this.k].is_like=!0)},change:function(t){this.k=t.detail.current},animationfinish:function(t){this.k==this.dataList.length-1&&this.GET()},GET:function(){var i=this;(0,s.videoList)({page:this.page,limit:this.limit,order_type:this.currentNav,id:this.page>1||2==this.currentNav?0:this.videoID}).then((function(t){i.page=i.page+1;for(var e=t.data,n=0;n<e.length;n++)i.dataList.push(e[n])})).catch((function(i){return t.showToast({title:i,icon:"none",duration:2e3})}))},get:function(){var i=this;(0,s.videoList)({page:this.page,limit:this.limit,order_type:this.currentNav,id:this.page>1||2==this.currentNav?0:this.videoID}).then((function(e){i.page=i.page+1;for(var n=e.data,o=0;o<n.length;o++)i.dataList.push(n[o]);setTimeout((function(){i.dataList[i.k].isplay=!1,i.dataList[i.k].state="play",t.createVideoContext(i.dataList[i.k].id+""+i.k,i).seek(0),t.createVideoContext(i.dataList[i.k].id+""+i.k,i).play(),i.dataList[i.k].playIng=!0}),200);var a=i.k;++a,i.dataList[a].id&&(setTimeout((function(){t.createVideoContext(i.dataList[a].id+""+a,i).play()}),20),clearTimeout(i.timeout),i.timeout=setTimeout((function(){t.createVideoContext(i.dataList[a].id+""+a,i).seek(0),t.createVideoContext(i.dataList[a].id+""+a,i).pause()}),1500))})).catch((function(i){return t.showToast({title:i,icon:"none",duration:2e3})}))},cShare:function(i){(0,s.markeVideo)("share",i).then((function(t){})).catch((function(i){return t.showToast({title:i,icon:"none",duration:2e3})}))},getId:function(t){this.videoID=t},share:function(t){this.H5ShareBox=!0},cLike:function(i){var e=this;(0,s.markeVideo)("like",i.id).then((function(t){e.dataList[e.k].is_like=!e.dataList[e.k].is_like;var n=e.dataList[e.k];i.is_like?n.like_num+=1:n.like_num-=1})).catch((function(i){return t.showToast({title:i,icon:"none",duration:2e3})}))},cCollect:function(i){var e=this;(0,s.markeVideo)("collect",i.id).then((function(t){e.dataList[e.k].is_collect=!e.dataList[e.k].is_collect;var n=e.dataList[e.k];i.is_collect?n.collect_num+=1:n.collect_num-=1})).catch((function(i){return t.showToast({title:i,icon:"none",duration:2e3})}))}}};i.default=c}).call(this,e("543d")["default"])},3972:function(t,i,e){"use strict";(function(t,i){var n=e("4ea4");e("8824");n(e("66fd"));var o=n(e("6812"));t.__webpack_require_UNI_MP_PLUGIN__=e,i(o.default)}).call(this,e("bc2e")["default"],e("543d")["createPage"])},"3b37":function(t,i,e){},6812:function(t,i,e){"use strict";e.r(i);var n=e("290a"),o=e("9ec4");for(var a in o)["default"].indexOf(a)<0&&function(t){e.d(i,t,(function(){return o[t]}))}(a);e("cadf"),e("e7bb");var s=e("f0c5"),u=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);i["default"]=u.exports},"90b1":function(t,i,e){},"9ec4":function(t,i,e){"use strict";e.r(i);var n=e("34f0"),o=e.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(a);i["default"]=o.a},cadf:function(t,i,e){"use strict";var n=e("3b37"),o=e.n(n);o.a},e7bb:function(t,i,e){"use strict";var n=e("90b1"),o=e.n(n);o.a}},[["3972","common/runtime","common/vendor"]]]);