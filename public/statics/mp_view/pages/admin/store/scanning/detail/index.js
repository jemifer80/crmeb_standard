require('../../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/admin/store/scanning/detail/index"],{1294:function(t,i,n){"use strict";var e=n("caa6"),s=n.n(e);s.a},"1a42":function(t,i,n){"use strict";n.r(i);var e=n("2161"),s=n.n(e);for(var c in e)["default"].indexOf(c)<0&&function(t){n.d(i,t,(function(){return e[t]}))}(c);i["default"]=s.a},2161:function(t,i,n){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e=n("5a52"),s={components:{writeOffSwitching:function(){n.e("pages/admin/components/writeOffSwitching/index").then(function(){return resolve(n("d8c5"))}.bind(null,n)).catch(n.oe)}},data:function(){return{nums:[],newList:[],reduce_show:-1,plus_show:-1,ids:[],lets:0,listlet:0,attr:{cartAttr:!1,id:[],code:"",type:0},id:0,list:[],lists:[],lengt:0,box:!1,checked:!1,checkModel:[],isAllSelect:!1,data:[{id:"1",value:"aaa"},{id:"2",value:"bbb"},{id:"3",value:"ccc"}],writeOffNum:0}},watch:{checkModel:function(){this.lengt==this.checkModel.length?this.checked=!0:this.checked=!1}},onLoad:function(t){this.id=t.id,this.attr.code=t.code,this.lets=t.let,this.getList(this.id)},onShow:function(){},methods:{num:function(){for(var t=0;t<this.lists.cart_info.length;t++)this.nums.push({num:0})},subCart:function(t,i){1==t.surplus_num?this.reduce_show=i:(this.nums[i].num--,t.surplus_num--)},addCart:function(t,i){t.surplus_num==t.surplus_num+this.nums[i].num?this.plus_show=i:(t.surplus_num++,this.nums[i].num++)},checkAll:function(){var t=this.list.cart_info;if(this.checked){this.checkModel=[];for(var i=0,n=this.list.cart_info.length;i<n;++i){var e=t[i];this.$set(e,"checked",!1)}}else{this.checkModel=[];for(i=0,n=this.list.cart_info.length;i<n;++i){var s=t[i];this.$set(s,"checked",!0),1==s.is_writeoff?this.checkModel=this.checkModel.filter((function(t){return t!=t.cart_id})):this.checkModel.push(s.cart_id)}this.lengt=this.checkModel.length}},dan:function(t,i){-1==this.checkModel.indexOf(t)?(this.$set(this.list.cart_info[i],"checked",!0),this.checkModel.push(t)):(this.$set(this.list.cart_info[i],"checked",!1),this.checkModel=this.checkModel.filter((function(i){return i!=t})))},getList:function(t){var i=this;(0,e.orderCartInfo)(1,{oid:t}).then((function(t){i.list=t.data,i.lists=JSON.parse(JSON.stringify(t.data)),i.listlet=t.data.cart_info.length,i.$set(i.attr,"id",i.list.id),i.checkAll(),i.num()}))},onDataId:function(t){this.nums.forEach((function(t){t.num=0})),this.id=t,this.getList(t)},switchs:function(){this.attr.cartAttr=!0,this.$refs.writeOff.getList(1)},onMyEvent:function(){this.attr.cartAttr=!1},verification:function(){var i=this,n={};for(var s in this.checkModel)n[s]=this.checkModel[s];for(var c=Object.keys(n).map((function(t){return{cart_id:n[t]}})),r=0;r<c.length;r++)for(var o=0;o<this.list.cart_info.length;o++)c[r].cart_id==this.list.cart_info[o].cart_id&&(c[r].cart_num=this.list.cart_info[o].surplus_num);if(this.newList=c,0==i.checkModel.length)i.$util.Tips({title:"请选择商品"});else{t.showLoading({title:"加载中"});var u=0;c.forEach((function(t){u+=parseInt(t.cart_num)})),this.writeOffNum=u,setTimeout((function(){(0,e.orderWriteoff)(1,{oid:i.id,cart_ids:i.newList}).then((function(n){t.hideLoading(),i.box=!0})).catch((function(n){i.$util.Tips({title:n}),t.hideLoading()}))}),1e3)}},ok:function(i){this.box=!1,this.nums.forEach((function(t){t.num=0})),this.getList(this.id),i&&t.redirectTo({url:"/pages/admin/store/index"})}}};i.default=s}).call(this,n("543d")["default"])},"41b2":function(t,i,n){},4946:function(t,i,n){"use strict";var e=n("41b2"),s=n.n(e);s.a},"84f6":function(t,i,n){"use strict";(function(t,i){var e=n("4ea4");n("8824");e(n("66fd"));var s=e(n("9ab8"));t.__webpack_require_UNI_MP_PLUGIN__=n,i(s.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},"9ab8":function(t,i,n){"use strict";n.r(i);var e=n("e15d"),s=n("1a42");for(var c in s)["default"].indexOf(c)<0&&function(t){n.d(i,t,(function(){return s[t]}))}(c);n("1294"),n("4946");var r=n("f0c5"),o=Object(r["a"])(s["default"],e["b"],e["c"],!1,null,"4e311d95",null,!1,e["a"],void 0);i["default"]=o.exports},caa6:function(t,i,n){},e15d:function(t,i,n){"use strict";n.d(i,"b",(function(){return e})),n.d(i,"c",(function(){return s})),n.d(i,"a",(function(){}));var e=function(){var t=this,i=t.$createElement,n=(t._self._c,t.__map(t.list.cart_info,(function(i,n){var e=t.__get_orig(i),s=1==i.is_writeoff&&1==i.is_writeoff?parseInt(t.lists.cart_info[n].cart_num-t.lists.cart_info[n].surplus_num):null,c=1!=i.is_writeoff&&0==i.is_writeoff&&t.lists.cart_info[n].surplus_num!=t.lists.cart_info[n].cart_num?parseInt(t.lists.cart_info[n].cart_num-t.lists.cart_info[n].surplus_num):null,r=1!=i.is_writeoff&&1!=i.is_writeoff?parseInt(i.surplus_num):null;return{$orig:e,m0:s,m1:c,m2:r}}))),e=t.box?parseInt(t.list.writeoff_count):null,s=t.box?1==t.lets&&t.list.total_num==parseInt(t.list.writeoff_count)+t.writeOffNum:null,c=t.box?parseInt(t.list.writeoff_count):null,r=t.box?t.lets>1&&t.list.total_num==parseInt(t.list.writeoff_count)+t.writeOffNum:null,o=t.box?t.lets>1&&t.list.total_num!=parseInt(t.list.writeoff_count)+t.writeOffNum:null,u=t.box?t.lets>1&&t.list.total_num==parseInt(t.list.writeoff_count)+t.writeOffNum||1==t.lets&&t.list.total_num!=parseInt(t.list.writeoff_count)+t.writeOffNum:null;t.$mp.data=Object.assign({},{$root:{l0:n,m3:e,m4:s,m5:c,m6:r,m7:o,m8:u}})},s=[]}},[["84f6","common/runtime","common/vendor"]]]);