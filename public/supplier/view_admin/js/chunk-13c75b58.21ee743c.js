(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13c75b58"],{"2bdc":function(t,e,r){"use strict";var a=r("5a7c"),i=r.n(a);i.a},3353:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{staticClass:"ivu-mts",staticStyle:{"padding-bottom":"0"},attrs:{bordered:!1,"dis-hover":""}},[r("div",{staticClass:"new_card_pd"},[r("Form",{ref:"pagination",attrs:{inline:"",model:t.pagination,"label-width":t.labelWidth,"label-position":t.labelPosition},nativeOn:{submit:function(t){t.preventDefault()}}},[r("FormItem",{attrs:{label:"退款时间："}},[r("DatePicker",{staticStyle:{width:"250px"},attrs:{editable:!1,value:t.timeVal,format:"yyyy/MM/dd",type:"daterange",placement:"bottom-start",placeholder:"自定义时间",options:t.options},on:{"on-change":t.onchangeTime}})],1),r("FormItem",{attrs:{label:"订单状态："}},[r("Select",{staticStyle:{width:"250px"},model:{value:t.pagination.refund_type,callback:function(e){t.$set(t.pagination,"refund_type",e)},expression:"pagination.refund_type"}},t._l(t.num,(function(e,a){return r("Option",{key:a,attrs:{value:a}},[t._v(t._s(e.name))])})),1)],1),r("FormItem",{attrs:{label:"订单搜索：","label-for":"title"}},[r("Input",{staticStyle:{width:"250px","margin-right":"14px"},attrs:{placeholder:"请输入订单号"},model:{value:t.pagination.order_id,callback:function(e){t.$set(t.pagination,"order_id",e)},expression:"pagination.order_id"}}),r("Button",{attrs:{type:"primary"},on:{click:function(e){return t.orderSearch()}}},[t._v("查询")]),r("Button",{staticClass:"ml20",on:{click:t.reset}},[t._v("重置")])],1)],1)],1)]),r("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[r("Table",{ref:"table",attrs:{columns:t.thead,data:t.tbody,loading:t.loading,"highlight-row":"","no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"},scopedSlots:t._u([{key:"order_id",fn:function(e){var a=e.row;return[r("span",{staticStyle:{display:"block"},domProps:{textContent:t._s(a.order_id)}}),r("span",{directives:[{name:"show",rawName:"v-show",value:1===a.is_del&&null==a.delete_time,expression:"row.is_del === 1 && row.delete_time == null"}],staticStyle:{color:"#ed4014",display:"block"}},[t._v("用户已删除")])]}},{key:"nickname",fn:function(e){var a=e.row;return[r("div",[t._v(t._s(a.nickname)),null!=a.delete_time?r("span",{staticStyle:{color:"#ed4014"}},[t._v(" (已注销)")]):t._e()])]}},{key:"user",fn:function(e){var a=e.row;return[r("div",[t._v("用户名："+t._s(a.nickname))]),r("div",[t._v("用户ID："+t._s(a.uid))])]}},{key:"refund_type",fn:function(e){var a=e.row;return[1==a.refund_type?r("Tag",{attrs:{color:"blue",size:"medium"}},[t._v("仅退款")]):t._e(),2==a.refund_type?r("Tag",{attrs:{color:"blue",size:"medium"}},[t._v("退货退款")]):t._e(),3==a.refund_type?r("Tag",{attrs:{color:"red",size:"medium"}},[t._v("拒绝退款")]):t._e(),4==a.refund_type?r("Tag",{attrs:{color:"blue",size:"medium"}},[t._v("商品待退货")]):t._e(),5==a.refund_type?r("Tag",{attrs:{color:"blue",size:"medium"}},[t._v("退货待收货")]):t._e(),6==a.refund_type?r("Tag",{attrs:{color:"green",size:"medium"}},[t._v("已退款")]):t._e()]}},{key:"info",fn:function(e){var a=e.row;return[r("Tooltip",{attrs:{theme:"dark","max-width":"300",delay:600}},[t._l(a._info,(function(e,a){return r("div",{key:a,staticClass:"tabBox"},[r("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"tabBox_img"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.cart_info.productInfo.attrInfo?e.cart_info.productInfo.attrInfo.image:e.cart_info.productInfo.image,expression:"\n                val.cart_info.productInfo.attrInfo\n                  ? val.cart_info.productInfo.attrInfo.image\n                  : val.cart_info.productInfo.image\n              "}]})]),r("span",{staticClass:"tabBox_tit line1"},[e.cart_info.is_gift?r("span",{staticClass:"font-color-red"},[t._v("赠品")]):t._e(),t._v("\n            "+t._s(e.cart_info.productInfo.store_name+" | ")+"\n            "+t._s(e.cart_info.productInfo.attrInfo?e.cart_info.productInfo.attrInfo.suk:"")+"\n          ")])])})),r("div",{attrs:{slot:"content"},slot:"content"},t._l(a._info,(function(e,a){return r("div",{key:a},[e.cart_info.is_gift?r("p",{staticClass:"font-color-red"},[t._v("赠品")]):t._e(),r("p",[t._v(t._s(e.cart_info.productInfo.store_name))]),r("p",[t._v(" "+t._s(e.cart_info.productInfo.attrInfo?e.cart_info.productInfo.attrInfo.suk:""))]),r("p",{staticClass:"tabBox_pice"},[t._v(t._s("￥"+e.cart_info.truePrice+" x "+e.cart_info.cart_num))])])})),0)],2)]}},{key:"statusName",fn:function(e){var a=e.row;return[r("Tooltip",{attrs:{theme:"dark","max-width":"300",delay:600}},[r("div",{staticClass:"pt5",domProps:{innerHTML:t._s(a.refund_reason)}}),r("div",{attrs:{slot:"content"},slot:"content"},[r("div",{staticClass:"pt5"},[t._v("退款原因："+t._s(a.refund_explain))]),a.refund_goods_explain?r("div",{staticClass:"pt5"},[t._v("退货原因："+t._s(a.refund_goods_explain))]):t._e()])]),a.refund_img?r("div",{staticClass:"pictrue-box"},t._l(a.refund_img||[],(function(t,e){return r("div",{directives:[{name:"viewer",rawName:"v-viewer"}],key:e},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"item"}],staticClass:"pictrue mr10",attrs:{src:t}})])})),0):t._e()]}},{key:"statusGoodName",fn:function(e){var a=e.row;e.index;return[r("div",{staticClass:"pt5",domProps:{innerHTML:t._s(a.refund_goods_explain)}}),r("div",{staticClass:"pictrue-box"},t._l(a.refund_goods_img||[],(function(e,i){return a.refund_goods_img?r("div",{directives:[{name:"viewer",rawName:"v-viewer"}],key:i},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"item"}],staticClass:"pictrue mr10",attrs:{src:e}})]):t._e()})),0)]}},{key:"action",fn:function(e){var a=e.row;return[r("a",{directives:[{name:"show",rawName:"v-show",value:[1,2,5].includes(a.refund_type)&&(parseFloat(a.pay_price)>parseFloat(a.refunded_price)||0==a.pay_price),expression:"\n            [1, 2, 5].includes(row.refund_type) &&\n            (parseFloat(row.pay_price) > parseFloat(row.refunded_price) ||\n              row.pay_price == 0)\n          "}],on:{click:function(e){return t.changeMenu(a,"5")}}},[t._v(t._s(2==a.refund_type?"同意退货":"立即退款"))]),r("Divider",{directives:[{name:"show",rawName:"v-show",value:[1,2,5].includes(a.refund_type)&&(parseFloat(a.pay_price)>parseFloat(a.refunded_price)||0==a.pay_price),expression:"\n            [1, 2, 5].includes(row.refund_type) &&\n            (parseFloat(row.pay_price) > parseFloat(row.refunded_price) ||\n              row.pay_price == 0)\n          "}],attrs:{type:"vertical"}}),r("a",{on:{click:function(e){return t.changeMenu(a,"2")}}},[t._v("订单详情")])]}}])}),r("div",{staticClass:"acea-row row-right page"},[r("Page",{attrs:{total:t.total,current:t.pagination.page,"show-elevator":"","show-total":"","page-size":t.pagination.limit},on:{"on-change":t.pageChange}})],1)],1),r("edit-from",{ref:"edits",attrs:{FromData:t.FromData},on:{submitFail:t.submitFail}}),r("details-from",{ref:"detailss",attrs:{orderDatalist:t.orderDatalist,orderId:t.orderId,rowActive:t.rowActive}}),r("order-remark",{ref:"remarks",attrs:{remarkType:"refund",orderId:t.orderId},on:{submitFail:t.submitFail}}),r("order-record",{ref:"record"})],1)},i=[],n=r("a34a"),o=r.n(n),s=r("f8b7"),d=r("31b4"),c=r("91b4"),l=r("7dc5"),u=r("5465"),f=r("0b65");function m(t,e,r,a,i,n,o){try{var s=t[n](o),d=s.value}catch(c){return void r(c)}s.done?e(d):Promise.resolve(d).then(a,i)}function p(t){return function(){var e=this,r=arguments;return new Promise((function(a,i){var n=t.apply(e,r);function o(t){m(n,a,i,o,s,"next",t)}function s(t){m(n,a,i,o,s,"throw",t)}o(void 0)}))}}var h={components:{editFrom:d["a"],detailsFrom:c["a"],orderRemark:l["a"],orderRecord:u["a"]},data:function(){return{thead:[{title:"订单号",align:"center",slot:"order_id",minWidth:150},{title:"用户信息",slot:"nickname",minWidth:130},{title:"商品信息",slot:"info",minWidth:300},{title:"实际支付",key:"pay_price",minWidth:70},{title:"发起退款时间",key:"add_time",minWidth:110},{title:"退款状态",slot:"refund_type",minWidth:100},{title:"退款信息",slot:"statusName",minWidth:100},{title:"退货信息",slot:"statusGoodName",minWidth:100},{title:"售后备注",key:"remark",minWidth:80},{title:"操作",slot:"action",fixed:"right",minWidth:150,align:"center"}],tbody:[],num:[],orderDatalist:null,loading:!1,FromData:null,total:0,orderId:0,animal:1,pagination:{page:1,limit:15,order_id:"",time:"",refund_type:0},options:f["a"],timeVal:[],modal:!1,qrcode:null,name:"",spin:!1,rowActive:{}}},computed:{labelWidth:function(){return this.isMobile?void 0:96},labelPosition:function(){return this.isMobile?"top":"right"}},created:function(){this.getOrderList()},methods:{reset:function(){this.pagination={page:1,limit:15,order_id:"",time:"",refund_type:0},this.getOrderList()},onchangeTime:function(t){this.pagination.page=1,this.timeVal=t,this.pagination.time=this.timeVal[0]?this.timeVal.join("-"):""},getData:function(t,e){var r=this;Object(s["k"])(t).then(function(){var t=p(o.a.mark((function t(a){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e||(r.$refs.detailss.modals=!0),r.$refs.detailss.activeName="detail",r.orderDatalist=a.data;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){r.$Message.error(t.msg)}))},changeMenu:function(t,e){var r=this;switch(this.orderId=t.id,e){case"1":this.delfromData={title:"修改立即支付",url:"/order/pay_offline/".concat(t.id),method:"post",ids:""},this.$modalSure(this.delfromData).then((function(t){r.$Message.success(t.msg),r.getOrderList()})).catch((function(t){console.log(t),r.$Message.error(t.msg)}));break;case"2":this.rowActive=t,this.getData(t.id);break;case"3":this.$refs.record.modals=!0,this.$refs.record.getList(t.store_order_id);break;case"4":this.$refs.remarks.modals=!0,this.$refs.remarks.formValidate.remark=t.remark;break;case"5":this.getRefundData(t.id,t.refund_type);break;case"6":this.getRefundIntegral(t.id);break;case"7":this.getNoRefundData(t.id);break;case"8":this.delfromData={title:"修改确认收货",url:"/order/take/".concat(t.id),method:"put",ids:""},this.$modalSure(this.delfromData).then((function(t){r.$Message.success(t.msg),r.getOrderList()})).catch((function(t){r.$Message.error(t.msg)}));break;case"10":this.delfromData={title:"立即打印订单",info:"您确认打印此订单吗?",url:"/order/print/".concat(t.id),method:"get",ids:""},this.$modalSure(this.delfromData).then((function(t){r.$Message.success(t.msg),r.$emit("changeGetTabs"),r.getOrderList()})).catch((function(t){console.log(t),r.$Message.error(t.msg)}));break;case"11":this.delfromData={title:"立即打印电子面单",info:"您确认打印此电子面单吗?",url:"/order/order_dump/".concat(t.id),method:"get",ids:""},this.$modalSure(this.delfromData).then((function(t){r.$Message.success(t.msg),r.getOrderList()})).catch((function(t){r.$Message.error(t.msg)}));break;default:this.delfromData={title:"删除订单",url:"/order/del/".concat(t.id),method:"DELETE",ids:""},this.delOrder(t,this.delfromData)}},getRefundData:function(t,e){var r=this;2==e?(this.delfromData={title:"是否立即退货",url:"/refund/agree/".concat(t),method:"get"},this.$modalSure(this.delfromData).then((function(t){r.$Message.success(t.msg),r.getOrderList(),r.getData(r.orderId,1)})).catch((function(t){r.$Message.error(t.msg)}))):this.$modalForm(Object(s["m"])(t)).then((function(){r.getOrderList(),r.getData(r.orderId,1),r.$emit("changeGetTabs")}))},getRefundIntegral:function(t){var e=this;Object(s["C"])(t).then(function(){var t=p(o.a.mark((function t(r){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.FromData=r.data,e.$refs.edits.modals=!0;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))},delOrder:function(t,e){var r=this;if(1===t.is_del)this.$modalSure(e).then((function(t){r.$Message.success(t.msg),r.getOrderList()})).catch((function(t){r.$Message.error(t.msg)}));else{var a="错误！",i="<p>您选择的的订单存在用户未删除的订单，无法删除用户未删除的订单！</p>";this.$Modal.error({title:a,content:i})}},submitFail:function(){this.getOrderList(),this.getData(this.orderId,1)},selectChange2:function(t){this.pagination.page=1,this.pagination.refund_type=t,this.getOrderList(t)},getNoRefundData:function(t){var e=this;this.$modalForm(Object(s["n"])(t)).then((function(){e.getOrderList(),e.getData(e.orderId),e.$emit("changeGetTabs")}))},getOrderList:function(){var t=this;this.loading=!0,Object(s["s"])(this.pagination).then((function(e){t.loading=!1;var r=e.data,a=r.count,i=r.list,n=r.num;t.total=a,t.tbody=i,t.num=n,i.forEach((function(e){e.id==t.orderId&&(t.rowActive=e)}))})).catch((function(e){t.loading=!1,t.$Message.error(e.msg)}))},pageChange:function(t){this.pagination.page=t,this.getOrderList()},nameSearch:function(){this.pagination.page=1,this.getOrderList()},orderSearch:function(){this.pagination.page=1,this.getOrderList()},delivery:function(t){var e=this;Object(s["e"])(t.id).then(function(){var t=p(o.a.mark((function t(r){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.FromData=r.data,e.$refs.edits.modals=!0;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))}}},g=h,_=(r("2bdc"),r("2877")),v=Object(_["a"])(g,a,i,!1,null,"3f3239f2",null);e["default"]=v.exports},"5a7c":function(t,e,r){}}]);