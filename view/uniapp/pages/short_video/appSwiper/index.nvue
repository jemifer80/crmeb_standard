<template>
	<view class="container">
		<!--
		Ê≥®ÊÑèÔºöËøôÊòØ App ÊâÄÁî®È°µÈù¢ÔºåËØ∑ÂãøÂºïÂÖ•ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÊàñÊµèËßàÂô®ËøêË°åÔºåÊúÄÂ•ΩËøêË°åÂú®ÁúüÊú∫
		 
		1. new_index.nvue„ÄÅindex.nvueËøô‰∏§‰∏™ÊòØAppÈ°µÈù¢
		 
		2. index.nvue - È°µÈù¢È¢ÑÂä†ËΩΩ‰ΩøÁî® - Âú®Á∫øÈ¢ÑÂä†ËΩΩÊñπÊ°à
		 
		3. Âè¶Â§ñÔºödata.js ÊòØ‰∏ä‰∏ÄÁâàÊú¨Áïô‰∏ãÁöÑÂÅáÊï∞ÊçÆÔºåËøô‰∏ÄÁâàÊîπÊàê‰∫Ü URL ËØ∑Ê±Ç‰∫ÜÔºàÂ¶Ç‰∏çÈúÄË¶ÅÂèØ‰ª•Âà†Èô§Ôºå‰πüÂèØ‰Ωú‰∏∫ÂêéÁ´ØËØ∑Ê±ÇÂèÇËÄÉÔºâ
		 
		4. ËØ∑ÂêÑ‰ΩçÂ§ßÁ•ûÂ§öÂ§öÁïôÊâãÔºåÊàëÂ∑≤ÁªèÊääËØ∑Ê±ÇÂÜÖÂ≠òÂºÄÂà∞ÊúÄÂ§ß‰∫Ü
		 
		5. ËßÜÈ¢ë id ÂàáËÆ∞ÊòØÂ≠óÁ¨¶‰∏≤Á±ªÂûã
		 
		6. ËøôÈáå‰ªÖ App Á´ØÂºïÂÖ•‰∫Ü App Á´Ø‰∏ìÁî®ËØÑËÆ∫ÔºåÂ∞èÁ®ãÂ∫è „ÄÅH5 ÂºïÂÖ•ÁöÑÊó∂ÂÄô ÂèØ‰ª•‰Ωú‰∏∫ÂèÇËÄÉ
		
		„Äê
			App„ÄÅÂ∞èÁ®ãÂ∫è„ÄÅH5ËØÑËÆ∫ËØ∑ÂèÇËÄÉÊèí‰ª∂Ôºöhttps://ext.dcloud.net.cn/plugin?id=7875
		„Äë
		 -->
		<!-- Â§¥ÈÉ®ÂØºËà™ -->
		<view class="header">
		 	<view class="items" @click.stop="navTap(2)">
				<text class="tName" :class="currentNav==2?'on':''">Êé®Ëçê</text>
				<view class="tLine" v-if="currentNav==2"></view>
			</view>
		 	<view class="items" @click.stop="navTap(1)">
				<text class="tName" :class="currentNav==1?'on':''">ÊúÄÊñ∞</text>
				<view class="tLine" v-if="currentNav==1"></view>
			</view>
		</view>
		<view class="footer">
			 <text class="items" @click="goIndex">È¶ñÈ°µ</text>
			 <text class="items on">ËßÜÈ¢ë</text>
			 <view class="items" @click="goCarts">
				<view class="itemCon">
					 <text class="cart">Ë¥≠Áâ©ËΩ¶</text>
					  <uni-badge v-if="cartNum>0" class="uni-badge-left-margin" type='error' :text="cartNum" />
				 </view>
			 </view>
			 <text class="items" @click="goUser">ÊàëÁöÑ</text>
		</view>
		<view class="noVideo acea-row row-center-wrapper" v-if="!dataList.length">
			<view>
				<image :src="imgHost+'/statics/images/no-video.png'" class="pictrue"></image>
				<text class="tips">ÊöÇÊó†Áü≠ËßÜÈ¢ëÂÜÖÂÆπÂì¶~</text>
			</view>
		</view>
		<!-- <view @click="tolistVideo" style="position: fixed; margin-top: 100upx; right: 40upx;">
			<text style="padding: 10upx; padding-left: 40upx; padding-right: 40upx; border-radius: 20upx; background-color: #F8F8F8; font-size: 14px;">H5/Â∞èÁ®ãÂ∫è</text>
		</view>
		<view @click="autoPlay" style="position: fixed; margin-top: 100upx; left: 40upx;">
			<text style="padding: 10upx; padding-left: 40upx; padding-right: 40upx; border-radius: 20upx; background-color: #F8F8F8; color: #007AFF; font-weight: bold; font-size: 14px;">{{autoplayText}}</text>
		</view>
		<view @click="previewVideo" style="position: fixed; margin-top: 200upx; right: 40upx;">
			<text style="padding: 10upx; padding-left: 40upx; padding-right: 40upx; border-radius: 20upx; background-color: #F8F8F8; font-size: 14px;">AppÁ´Ø-È¢ÑËßàËßÜÈ¢ëÁïåÈù¢</text>
		</view>
		<view @click="wxh5Video" style="position: fixed; margin-top: 300upx; right: 40upx;">
			<text style="padding: 10upx; padding-left: 40upx; padding-right: 40upx; border-radius: 20upx; background-color: #F8F8F8; font-size: 14px;">ÂæÆ‰ø°/H5Á´Ø-È¢ÑËßàËßÜÈ¢ëÁïåÈù¢</text>
		</view> -->
		<image v-if="isShowAixin" src="../static/img/index/aixining.png" :style="'position: fixed; margin-left: '+ aixinLeft +'px; margin-top: '+ aixinTop +'px; width: 70px; height: 65px; transform: rotate('+ Rotate +'deg);'"></image>
		<view :style="'width: '+ windowWidth +'px; height: '+ boxStyle.height +'px;'">
			<!-- 
			 1.ËøôÈáåÁöÑ swiper ‰∏çÊòØÁî®Êù•ÊéßÂà∂ËßÜÈ¢ëÊªëÂä®ÁöÑÔºåËÄåÊòØÁî®Êù•ÊéßÂà∂Â∑¶Âè≥ÊªëÂä®ÁöÑÔºåÂ¶ÇÊûú‰∏çÈúÄË¶ÅÁöÑÂèØ‰ª•ÊîπÊàê view
			 
			 2.‰∏∫‰∫Ü ËßÜÈ¢ëÊó†ÈôêÂä†ËΩΩÔºåÂ∑≤ÁªèÊää 21 Ë°åÁöÑ appear ÂéªÊéâ‰∫ÜÔºåÂä†‰∏ä‰∫Ü loadmore ÊñπÊ≥ïÔºàÁ¨¨10Ë°åÔºâ
			 
			 3.Áî±‰∫éÊñπÊ≥ïÊØîËæÉÂ§öÔºåÂèØ‰ª•ÈááÂèñ‰∏ãÈù¢ÁöÑÊñπÂºèÊü•Áúã‰ª£Á†ÅÔºö
			 Ôºà1ÔºâMacÔºöÊåâ‰Ωè option ÈîÆÔºåÁÑ∂ÂêéÁÇπÂáªÊñπÊ≥ïÂêçÔºåÂç≥ÂèØË∑≥ËΩ¨Âà∞ÊñπÊ≥ï
			 Ôºà2ÔºâwindowsÔºöÊåâ‰Ωè Alt ÈîÆÔºåÁÑ∂ÂêéÈº†Ê†áÂ∑¶ÂáªÔºåÂç≥ÂèØË∑≥ËΩ¨Âà∞ÊñπÊ≥ï
			 -->
			<list @loadmore="getData" @scroll="scrolls" :loadmoreoffset="wHeight*1" :show-scrollbar="false" ref="listBox" :pagingEnabled="true" :scrollable="true">
				<!-- Âà∑Êñ∞Ê®°Âùó -->
				<refresh class="refresh" @refresh="onrefresh" @pullingdown="onpullingdown" :display="refreshing ? 'show' : 'hide'">
					<loading style="background-color: #FFFFFF;">
						<image src="../static/img/index/logins.gif" :style="'width: 80upx; height: 40upx; margin-top: 80upx; margin-bottom: 30upx; margin-left: '+ (windowWidth - 200) +'px;'"></image>
					</loading>
				</refresh>
				
				<!-- Âæ™ÁéØÊï∞ÊçÆ -->
				<cell v-for="(item,i) in dataList" :key="i">
					<!-- Áî®divÊääËßÜÈ¢ëÊ®°ÁªÑÂ•óËµ∑Êù• -->
					<div :style="'width: '+ windowWidth +'px; height: '+ boxStyle.height +'px;'" @disappear="stop()">
						<view v-if="Math.abs(k-i)<=1">
							<view class="root">
								<!-- 
								ÂÖ∑‰ΩìËßÜÈ¢ëÂèÇÊï∞ÂèØ‰ª•ÂèÇËÄÉÂÆòÊñπÊñáÊ°£
								ËØ¥ÊòéÔºö
								1.v-ifÂæàÂÖ≥ÈîÆÔºåËøôÈáå‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÂáèÂ∞ë dom ÂÖÉÁ¥†„ÄêËøôÊ†∑Êâç‰∏ç‰ºöÂä†ËΩΩËßÜÈ¢ëÂ§ö‰∫ÜÈó™ÈÄÄ„ÄëÔºå
									ËøôÈáå Math.abs(k-i)<=5 ‰πüÂ∞±ÊòØÂæÄ‰∏äÈ¢ÑÂä†ËΩΩ 5 ‰∏™ËßÜÈ¢ëÔºåÂæÄ‰∏ãÈ¢ÑÂä†ËΩΩ 5 
									‰∏™ËßÜÈ¢ëËøôÊ†∑ÂÅöÁöÑÁõÆÁöÑÊòØ‰∏∫‰∫ÜËÆ©ËßÜÈ¢ëËÉΩÂ§üÊèêÂâçÂä†ËΩΩ‰ΩÜÊòØ‰∏çÊí≠ÊîæÔºåÂú®ÁúüÊ≠£ÊªëÂà∞‰Ωç
									ÁΩÆÁöÑÊó∂ÂÄôÊí≠ÊîæËßÜÈ¢ë„ÄÇ
									„Äê2.0.1Â∞±ÊòØ  1  Math.abs(k-i)<=1ÔºöËØ∑Âãø‰øÆÊîπÔºåËÆ∞‰ΩèÔºåË¶Å‰∏çÁÑ∂‰ºöÊèêÂâçÊí≠ÊîæÂæàÂ§öËßÜÈ¢ë„Äë
									
								2.Ë¶ÅÊ≥®ÊÑè @play="playIngs" ÈáåÈù¢ÁöÑ playIngs ÊñπÊ≥ïÔºåËøô‰∏™ÊñπÊ≥ïÂè™ÊòØÂú®ËßÜÈ¢ëÊí≠ÊîæÁöÑÊó∂ÂÄô
									Ëµ∑ÊïàÊûúÔºåÊàë‰ª¨ÊéßÂà∂ËßÜÈ¢ëÊí≠Êîæ‰∏çÊòØÁî®Ëøô‰∏™ÁöÑ„ÄÇËøô‰∏™ÁöÑ‰∏ªË¶Å‰ΩúÁî®ÊòØÁªôËßÜÈ¢ëÂ∞ÅÈù¢ÁöÑ„ÄÇÊàë‰ª¨ÂÖàÁî®
									‰∏ãÈù¢ÁöÑËßÜÈ¢ëÂ∞ÅÈù¢Áõñ‰ΩèËßÜÈ¢ëÔºåÁ≠âÂà∞ËßÜÈ¢ëÊí≠ÊîæÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨‰∏çË¶ÅÊÄ•ÁùÄÁõ¥Êé•Êí≠ÊîæÔºåËÄåÊòØÂª∂Ëøü‰∏Ä‰∏ã‰∏ãÔºå
									300-600msÂ∑¶Âè≥„ÄÇÂõ†‰∏∫ËßÜÈ¢ëÊí≠ÊîæÈúÄË¶Å‰∏ÄÁÇπÁÇπÊó∂Èó¥ÔºåËøôÁÇπÊó∂Èó¥Èáå‰ºöÈªëÂ±èÔºåËøô‰∏™Êó∂ÂÄôÊàë‰ª¨Â∞±Áî®
									‰∏ãÈù¢ÁöÑÂ∞ÅÈù¢Áõñ‰ΩèÔºåËøôÊ†∑Áî®Êà∑Â∞±‰∏ç‰ºöÊúâ‰ªéÈªëÂ±èÂà∞ÊúâÁîªÈù¢ÁöÑÊÑüËßâ‰∫ÜÔºå‰ΩÜÊòØÂ¶ÇÊûúÈÅáÂà∞ËßÜÈ¢ëÂ§™Â§ßÔºåÁºìÂÜ≤
									Êó∂Èó¥Â§™ÈïøÔºåËøòÊòØ‰ºöÂá∫Áé∞Áü≠ÊöÇÁöÑÈªëÂ±èÔºåÂ§ßÈÉ®ÂàÜÊòØ‰∏ç‰ºöÊúâÈªëÂ±èÁöÑÔºàËøôÊ†∑Áõñ‰ΩèÁöÑËØùÔºâ„ÄÇ
									
									„ÄêÊõ¥Êñ∞ËÆ∞ÂΩïÔºö2.0Áâà„ÄëÂ∑≤ÁªèËß£ÂÜ≥‰∫ÜËßÜÈ¢ëÈªëÂ±èÈóÆÈ¢òÔºåÂíåÂä†ËΩΩÈÄüÂ∫¶ÊÖ¢ÁöÑÊÉÖÂÜµÔºåÂ¶ÇÊûúËøòÊòØÂá∫Áé∞‰∫ÜÈªëÂ±èÔºå
									ÊÑèÂë≥ÁùÄÊ≠§Êó∂ÊâãÊªëÂä®ÁöÑÈÄüÂ∫¶ÔºåÂ∑≤ÁªèË∂ÖËøá‰∫ÜËßÜÈ¢ëÂä†ËΩΩÁöÑÈÄüÂ∫¶ÔºåÂØπ‰∫éËøô‰∏™ÈóÆÈ¢òÔºåÂª∫ËÆÆ‰øÆÊîπ preloadNumber 
									ÂèòÈáèÔºåÂΩìÂÆÉÁöÑÂÄºÂ§ß‰∏ÄÁÇπÁöÑÊó∂ÂÄôÂ∞±‰ºöÊèêÂâçÂä†ËΩΩËßÜÈ¢ëÔºåËøôÊ†∑Áî®Êà∑Âú®ÊªëÂà∞ËßÜÈ¢ëÁöÑÊó∂ÂÄôÂ∞±‰∏ç‰ºöÊúâÂÅúÈ°øÊÑü‰∫Ü
									„ÄêÊ≥®ÊÑè„ÄëÔºöËÄÅÁî®Êà∑Âú® video ‰∏≠Â¢ûÂä†Âíå‰øÆÊîπ 
									Ôºà1Ôºâ:muted="!item.playIng"Ôºå
									Ôºà2Ôºâ@timeupdate="timeupdate($event,i)"
									Ôºà3ÔºâÊää 199 Ë°åÊ≥®Èáä‰∫ÜÔºå
									Ôºà4Ôºâ:id="item.id"Ôºå
									Ôºà5Ôºâ‰øÆÊîπÔºöuni.createVideoContext(this.dataList[this.k].id + '' + this.k,this) ‰∏∫
										uni.createVideoContext(this.dataList[this.k].id,this)
									Ôºà6ÔºâÂú® timeupdate ÊñπÊ≥ïÈáåÂä†ÂÖ•Ôºåif(index == this.k){ÊääÈáåÈù¢ÁöÑÂä†‰∏Ä‰∏™ÊÄªÁöÑÂà§Êñ≠}
								3.ÂÖ∂‰ªñÁöÑ‰∏ãÈù¢ÊúâËØ¶Ëß£
								 -->
								<video
									:ref="'item'+i"
									:id="item.id"
									:loop="true"
									:src="item.video_url"
									:muted="item.isplay"
									@play="playIngs(i)"	
									:enable-progress-gesture="false"
									:page-gesture="false"
									:controls="false"
									:http-cache="true"
									:show-loading="false"
									:show-fullscreen-btn="false"
									:show-center-play-btn="false"
									:style="boxStyle"
									:object-fit="object_fit"
									@timeupdate="timeupdate($event,i)"
								></video>
								<!-- ËøôÈáåÊòØÂ∞ÅÈù¢ -->
								<image
								v-if="!item.playIng"
									:src="item.video_url+'?x-oss-process=video/snapshot,t_100,f_jpg'" 
									:mode="mode"
									:style="'width: '+ windowWidth +'px; height: '+ (wHeight - deleteHeight) +'px; position: absolute;'"
								></image>
								<!-- 
								mode: ÂõæÁâáË£ÅÂâ™„ÄÅÁº©ÊîæÁöÑÊ®°Âºè
								mode Êúâ 14 ÁßçÊ®°ÂºèÔºåÂÖ∂‰∏≠ 5 ÁßçÊòØÁº©ÊîæÊ®°ÂºèÔºå9 ÁßçÊòØË£ÅÂâ™Ê®°Âºè„ÄÇ
								https://uniapp.dcloud.io/component/image
								 -->
							</view>
							<!-- Áõ¥Êé•Áî® view Â∞±Ë°å‰∫ÜÔºå‰∏ÄÊ†∑ÊòØÂèØ‰ª•Ë¶ÜÁõñÂéüÁîüÁªÑ‰ª∂ÁöÑ -->
							<!-- Ëøô‰∏™ÊòØÊöÇÂÅúÊó∂Âá∫Áé∞ÁöÑÂõæÊ†á -->
							<view class="videoHover" @click="tapVideoHover(item.state,$event)" @touchstart="touchstartHover" :style="boxStyle">
								<image v-if="item.state=='pause'" class="playState" src="../static/img/index/play.png"></image>
							</view>
							<view class="userInfo">
								<!-- 1.Â§¥ÂÉè -->
								<image v-if="item.isShowProgressBarTime == false" @click="tozuozhe(item)" class="userAvatar" :src="item.type_image" mode="aspectFill"></image>
								<!-- 2.ÁÇπËµû -->
								<view v-if="item.isShowProgressBarTime == false" @click="cLike(item);" style="opacity: 0.9; margin-top: 5px;">
									<image v-if="item.is_like" src="../static/img/index/xin.png" style="width: 29px; height: 29px; position: absolute; right: 6px;"></image>
									<image v-if="!item.is_like" src="../static/img/index/xin-2.png" style="width: 29px; height: 29px; position: absolute; right: 6px;"></image>
									<text style="color: #FFFFFF; margin-top: 5px; font-size: 12px; text-align: center; margin-top: 32px; font-weight: 400;">{{item.like_num}}</text>
								</view>
								<!-- 3.ËØÑËÆ∫ -->
								<view v-if="item.isShowProgressBarTime == false" class="comment" @click="toComment(item)" style="opacity: 0.9; margin-top: 18px;">
									<image src="../static/img/index/evaluate.png" style="width: 54rpx; height: 50rpx; position: absolute; right: 7px;"></image>
									<text style="color: #FFFFFF; font-size: 12px; font-weight: 400; text-align: center; margin-top: 29px;">{{item.comment_num}}</text>
								</view>
								<!-- Êî∂Ëóè -->
								<view @click="cCollect(item);" style="opacity: 0.9; margin-top: 18px;">
									<image v-if="item.is_collect" src="../static/img/index/collection02.png" style="width: 29px; height: 29px; position: absolute; right: 6px;"></image>
									<image v-if="!item.is_collect" src="../static/img/index/collection01.png" style="width: 29px; height: 29px; position: absolute; right: 6px;"></image>
									<text style="color: #FFFFFF; margin-top: 5px; font-size: 12px; text-align: center; margin-top: 36px; font-weight: 400;">{{item.collect_num}}</text>
								</view>
								<!-- 4.ÂàÜ‰∫´ -->
								<view class="shares" v-if="item.isShowProgressBarTime == false" @click="appShare('WXSceneSession',item.id)">
									<image class="img" src="../static/img/index/we-chat.png"></image>
									<text class="text">ÂàÜ‰∫´</text>
								</view>
							</view>
							<!-- ÊúÄÂ∫ï‰∏ãÁöÑÊñáÂ≠óÈÉ®ÂàÜ -->
							<view class="content" v-if="dataList.length !== 0 && dataList[k].isShowProgressBarTime == false">
								<view class="cart" @click="goCart(item)" v-if="item.product_num>0">
									<image class="cartPic" src="../static/img/index/shopping-car.png"></image>
									<text class="cartName">Ë¥≠Áâ©</text>
									<text class="line"></text>
									<text class="cartName">ËßÜÈ¢ëÊ¨æËØ∑ÁÇπÂáªËøôÈáåË¥≠‰π∞</text>
								</view>
								<view class="timeCon" :style="'width: '+ (windowWidth - 90) +'px;'">
									<text class="userName" v-if="item.type_name.length<=12">{{item.type_name}}</text>
									<text class="userName" v-else>{{item.type_name.slice(0,12)}}...</text>
									<text class="time">.{{item.date}}</text>
								</view>
								<view class="words" :style="'width: '+ (windowWidth - 120) +'px;'">
									<view v-if="item.isMore || item.desc.length<=29">
										 <text class="info">{{item.desc}}</text>
										 <view class="close">
											 <text v-if="item.isMore" class="more" @click="moreTap(item)">Êî∂Ëµ∑</text>
											 <image v-if="item.isMore" class="imgClose" src="../static/img/index/drop-down.png"></image>
										 </view>
									</view>
									<view class="wordsCon" v-else>
										<text class="info">{{item.desc.slice(0,29)}}...</text>
										<text class="more" @click="moreTap(item)">Êõ¥Â§ö</text>
										<image class="img" src="../static/img/index/drop-down.png"></image>
									</view>
								</view>
							</view>
							<!-- 1.ËßÜÈ¢ëÈ¢ÑËßàÊó∂ÁöÑÂõæÁâáÔºåcurrenttimesÔºöÂ∞±ÊòØËé∑ÂèñÂΩìÂâçÊªëÂùóÁöÑÊó∂Èó¥ÁÇπÔºåÂ¶ÇÊûú‰∏çÈúÄË¶ÅÔºåÂèØ‰ª•Ê≥®ÈáäÊéâ -->
							<!-- 2.Â¶ÇÊûú‰ΩøÁî®‰∏ãÈù¢ÁöÑËßÜÈ¢ëÈ¢ÑËßàÁöÑËØùË¶ÅÊ≥®ÊÑèÁöÑÊòØËßÜÈ¢ëÈìæÊé•ÊúÄÂ•ΩÊòØÈòøÈáå‰∫ë‰∏äÁöÑÔºåÂõ†‰∏∫
									https://xxxxxxxxx.mp4?x-oss-process=video/snapshot,t_1000,f_jpg
									Ëøô‰∏™ÊòØÈòøÈáå‰∫ëÁöÑ‰∏úË•øÔºåËá≥‰∫éÂÖ∂‰ªñÁöÑËßÜÈ¢ëÊà™Â∏ßÊàëËøòÊ≤°ÊúâËØïËøá„ÄÇ
									-->
							<!-- 3.ÈòøÈáå‰∫ëËßÜÈ¢ëÊà™Â∏ßÂú∞ÂùÄÔºöhttps://help.aliyun.com/document_detail/64555.html -->
							<image
							v-if="item.isShowimage == true"
								:src="item.src+'?x-oss-process=video/snapshot,t_'+ currenttimes +'000,f_jpg'" 
								mode="aspectFill"
								:style="'width: 120upx; height: 160upx; border-radius: 10upx; position: absolute; bottom: '+ (ProgressBarBottom + 160) +'upx; left: '+ (currentPositions - 15) +'px;'"
							></image>
						</view>
					</div>
				</cell>
			</list>
			<!-- 1.Ê≥®ÊÑèÔºöËøõÂ∫¶Êù°ËøôÁ±ªÊãñÊãΩÁöÑ‰∏úË•ø‰∏çËÉΩÊîæËøõblock\cellËøô‰∫õÂæ™ÁéØ‰Ωì‰∏≠ÁöÑÔºåË¶Å‰∏çÁÑ∂touchmoveÊñπÊ≥ï‰ºöÊçïÊçâÊúâËØØ -->
			<!-- <view v-if="dataList.length !== 0 && dataList[k].isShowProgressBarTime == true" :style="'position: absolute; bottom: '+ (ProgressBarBottom + this.windowWidth*0.2)/2 +'px; left: '+ (windowWidth*2 - this.windowWidth*1.35)/2 +'px;'">
				<text style="font-size: 22px; font-weight: bold; color: #F1F1F1;">{{changeTime}} / {{videoTimes}}</text>
			</view> -->
			<!-- ËøôÈáåÂ∞±ÊòØËøõÂ∫¶Êù°‰∫ÜÔºöÁ∫ØÊâãÂ∑•ËøõÂ∫¶Êù°ÔºåË∞ÉÊï¥‰ΩçÁΩÆÁöÑËØùÂ∞±Êää‰ªñ‰ª¨ÁöÑ bottom ÊîπÊàê‰∏Ä‰∏ãÂ∞±Ë°å‰∫Ü -->
			<!-- <view v-if="isDragging == false" @touchmove="touchmove" @touchend="touchend" @touchstart="touchstart" style="position: absolute; bottom: 0; left: 0;"> -->
				<!-- 1.Ëøô‰∏ÄÊ≠•ÂøÖÈ°ªÂä†Ôºå‰∏∫‰∫ÜÈÄÇÈÖç‰ΩéÁ´ØÊú∫Âûã -->
				<!-- <text :style="'width: '+ windowWidth +'px; opacity: 0;'">.</text> -->
				<!-- 2.ËøôÊòØÊú™Âä†ËΩΩÁöÑÊó∂ÁöÑÂè≥ËæπÁöÑÁÅ∞Ëâ≤ÈÉ®ÂàÜ -->
				<!-- <view :style="'width: '+ windowWidth +'px; height: 4upx; background-color: #C8C7CC; position: absolute; bottom: '+ ProgressBarBottom +'upx; opacity: '+ ProgressBarOpacity +';'"></view> -->
				<!-- 3.ËøôÈáåÊàëÈááÁî®ÁöÑÂàÜÁ¶ªÂºèÂäûÊ≥ïÔºöÂ∞±ÊòØËÆ©ÊªëÂä®Ê†∑ÂºèÂíå‰∏çÊªëÂä®ÁöÑÊ†∑ÂºèÂàÜÂºÄÔºåËøôÊ†∑Áõ∏‰∫í‰∏çÂπ≤Êâ∞ÔºåÂèØ‰ª•ÈÅøÂÖçËøõÂ∫¶Êù°Èó™Âä®ÁöÑÈóÆÈ¢ò -->
				<!-- 4.Ê≥®ÊÑèÔºöisShowProgressBarTime Âä†ÂÖ•‰∫ÜËøîÂõûÊï∞ÊçÆ‰∏≠ -->
				<!-- <view v-if="dataList.length !== 0 && dataList[k].isShowProgressBarTime == false" :style="'width: '+ (currentPosition) +'px; height: 4upx; background-color: #FFFFFF; position: absolute; bottom: '+ ProgressBarBottom +'upx; left: 0; opacity: '+ (ProgressBarOpacity - 0.1) +';'"></view>
				<view v-if="dataList.length !== 0 && dataList[k].isShowProgressBarTime == true" :style="'width: '+ (currentPositions) +'px; height: 8upx; background-color: #FFFFFF; position: absolute; bottom: '+ ProgressBarBottom +'upx; left: 0; opacity: '+ (ProgressBarOpacity + 0.05) +';'"></view>
				<view v-if="dataList.length !== 0 && dataList[k].isShowProgressBarTime == false" :style="'width: 4px; height: 4px; background-color: #FFFFFF; border-radius: 10px; position: absolute; bottom: '+ (ProgressBarBottom - 2) +'upx; left: '+ (currentPosition) +'px; opacity: '+ ProgressBarOpacity +';'"></view>
				<view v-if="dataList.length !== 0 && dataList[k].isShowProgressBarTime == true" :style="'width: '+ dotWidth +'px; height: '+ dotWidth +'px; background-color: #FFFFFF; border-radius: 10px; position: absolute; bottom: '+ (ProgressBarBottom - 5) +'upx; left: '+ (currentPositions - 5) +'px; opacity: '+ ProgressBarOpacity +';'"></view> -->
			<!-- </view> -->
		</view>
		<!--
		
		ËØ∑ÂâçÂæÄ douyin-scrollview.nvue Êñá‰ª∂Êü•Áúã
		
		Â∑≤ÁªèÂÖ®ÈÉ®Ê≥®Èáä
		
		 ËøôÈáåÂ∞±ÊòØÂºïÂÖ•ËØÑËÆ∫Êèí‰ª∂
		 
		 
		 -->
		<uni-popup type="bottom" ref="pinglun" @touchmove.stop.prevent="moveHandle">
			<view :style="'width: '+ windowWidth +'px; height: '+ (boxStyle.height/heightNum) +'px; background-color: #fff; border-top-left-radius: 10px; border-top-right-radius: 10px;'">
				<!-- 
				 Ê≥®ÊÑèÔºö
				 deleteIOSHeight
				 deleteAndroidHeight
				 Ëøô‰∏§‰∏™ÂèÇÊï∞Áî®‰∫éÊéßÂà∂ËØÑËÆ∫Á≠âÁöÑÈ´òÂ∫¶
				 -->
				<douyin-scrollview
				:Width="windowWidth"
				:Height="(boxStyle.height/1.18)"
				:deleteIOSHeight="36"
				:deleteAndroidHeight="15"
				@closeScrollview="closeScrollview"
				@pinlunFun="pinlunFun"
				></douyin-scrollview>
			</view>
		</uni-popup>
		<uni-popup type="bottom" ref="pinglunGoods" @touchmove.stop.prevent="moveHandle">
			<view :style="'width: '+ windowWidth +'px;background-color: #F5F5F5; border-top-left-radius: 10px; border-top-right-radius: 10px;'">
				<goodsList 
				:Width="windowWidth"
				:Height="(boxStyle.height/1.18)"
				></goodsList>
			</view>
		</uni-popup>
	</view>
</template>
<script>
	// import userList from './data.js'//Ëøô‰∏™ÊòØÂÅáÊï∞ÊçÆ
	const app = getApp();
	import {
		toLogin
	} from '@/libs/login.js';
	import {
		mapGetters
	} from 'vuex';
	/*
	ÂºïÂÖ•ËØÑËÆ∫ÁªÑ‰ª∂
	*/ 
	import douyinScrollview from '../components/douyin-scrollview/douyin-scrollview.nvue'
	import goodsList from '../components/goodsList/index.vue'
	import {
		videoList,
		markeVideo
	} from '@/api/short-video.js';
	import {
		HTTP_REQUEST_URL
	} from '@/config/app.js';
	import {
		getCartCounts,
	} from '@/api/order.js';
	export default {
		computed: mapGetters(['isLogin','uid','cartNum']),
    data() {
			return {
				isGoods:false,
				//‰∏ãÈù¢ÊâìüåüÂè∑ÁöÑÊòØÂøÖÈ°ªË¶ÅÁöÑÂü∫Á°ÄÂ≠óÊÆµ
				//‰∏ãÈù¢ÊâìüíóÂè∑ÁöÑÊòØÊã•ÊúâÊªëÂä®Êù°ÁöÑÂøÖÈ°ªÂ≠óÊÆµ
				dataList:[],//Áî®‰∫éÊï∞ÊçÆÂæ™ÁéØÁöÑÂàóË°®üåüüíó
				wHeight:0,//Ëé∑ÂèñÁöÑÂ±èÂπïÈ´òÂ∫¶üåüüíó
				boxStyle:{//ËßÜÈ¢ëÔºåÂõæÁâáÂ∞ÅÈù¢Ê†∑Âºèüåüüíó
					'height': 0,
					'width': 0,
				},
				k:0,//ÈªòËÆ§‰∏∫0üåüüíó
				playIngIds:[],//Ê≠£Âú®Êí≠ÊîæÁöÑËßÜÈ¢ëidÂàóÈòüÔºåÂàóÈòüÁî®‰∫éÂ§ÑÁêÜÊªëÂä®ËøáÂø´ÂØºËá¥ÁöÑË∑≥È¢ëÈóÆÈ¢òüåüüíó
				ready:false,//ÂèØÂøΩÁï•
				isDragging: false,//false‰ª£Ë°®ÂÅúÊ≠¢ÊªëÂä®üåüüíó
				refreshing: true,//Áî®‰∫é‰∏ãÊãâÂà∑Êñ∞üåüüíó
				windowWidth: 0,//Ëé∑ÂèñÂ±èÂπïÂÆΩÂ∫¶üåüüíó
				windowHeight: 0,
				dex: [0,0],//Áî®‰∫éÂà§Êñ≠ÊòØ‰∏äÊªëËøòÊòØ‰∏ãÊªëÔºåÁ¨¨‰∏Ä‰∏™Â≠òÊóßÂÄºÔºåÁ¨¨‰∫å‰∏™Â≠òÊñ∞ÂÄº„ÄêÁõÆÂâçÂú®1.0.7Â∑≤ÁªèÂ∫üÂºÉ„Äë
				currents: 0,//Áî®‰∫éÂ∑¶Âè≥ÊªëÂä®Ôºå0‰ª£Ë°®ËßÜÈ¢ëÁïåÈù¢Ôºå1‰ª£Ë°®Âè≥ÊªëÁïåÈù¢üåüüíó
				platform: '',//Áî®‰∫éËé∑ÂèñÊìç‰ΩúÁ≥ªÁªüÔºöios„ÄÅandroidüåüüíó
				playIng: false,//Áî®‰∫éËßÜÈ¢ëÂàùÂßãÂåñÊó∂ÊòØÂê¶Êí≠ÊîæÔºåÈªòËÆ§‰∏çÊí≠Êîæüåüüíó
				videoTime: '',//ËßÜÈ¢ëÊÄªÊó∂ÈïøÔºåËøô‰∏™‰∏ªË¶ÅÁî®Êù•Êà™ÂèñÊó∂Èó¥Êï∞ÂÄºüíó
				videoTimes: '',//ËßÜÈ¢ëÊó∂ÈïøÔºåÁî®Ëøô‰∏™Êù•Ëé∑ÂèñÊó∂Èó¥ÂÄºÔºå‰æãÂ¶ÇÔºö00:30Ëøô‰∏™Êó∂Èó¥ÂÄºüíó
				changeTime: '',//ÊòæÁ§∫ÊªëÂä®ËøõÂ∫¶Êù°Êó∂ÂèòÂåñÁöÑÊó∂Èó¥üíó
				isShowimage: false,//ÊòØÂê¶ÊòæÁ§∫Â∞ÅÈù¢„Äê1.0.4Â∑≤Â∫üÂºÉÔºå‰ΩÜÊòØÊÑèÊÄùÈúÄË¶ÅËÆ∞‰Ωè„Äë
				currenttimes: 0,//ÂΩìÂâçÊó∂Èó¥üíó
				isShowProgressBarTime: false,//ÊòØÂê¶ÊãñÂä®ËøõÂ∫¶Êù°ÔºåÂ¶ÇÊûúÊãñÂä®ÔºàtrueÔºâÂàôÊòæÁ§∫ËøõÂ∫¶Êù°Êó∂Èó¥ÔºåÂê¶Âàô‰∏çÊòæÁ§∫ÔºàfalseÔºâ„Äê1.0.4Â∑≤Â∫üÂºÉÔºå‰ΩÜÊòØÊÑèÊÄùÈúÄË¶ÅËÆ∞‰Ωè„Äë
				ProgressBarOpacity: 0.7,//ËøõÂ∫¶Êù°‰∏çÊãñÂä®Êó∂ÁöÑÈªòËÆ§ÂÄºÔºåÂ∞±ÊòØÈÄèÊòéÁöÑüíó
				dotWidth: 0,//Êí≠ÊîæÁöÑÂ∞èÂúÜÁÇπÔºåÈªòËÆ§Ê≤°Êúâüíó
				deleteHeight: 0,//ÊµãËØïÈ´òÂ∫¶üåüüíó
				percent: 0,//ÁôæÂàÜÂ∞èÊï∞üíó
				currentPosition: 0,//ÊªëÂùóÂΩìÂâç‰ΩçÁΩÆüíó//2.0Â∑≤ÂºÉÁî®ÔºåÁé∞Â∑≤Áî®‰∫éÂêéÁ´ØÂèÇÊï∞
				currentPositions: 0,//ÊªëÂùóÂΩìÂâç‰ΩçÁΩÆÁöÑÂâØÊú¨üíó//2.0Â∑≤ÂºÉÁî®ÔºåÁé∞Â∑≤Áî®‰∫éÂêéÁ´ØÂèÇÊï∞
				newTime: 0,//Ë∑üÊâãÊªëÂä®ÂêéÁöÑÊúÄÊñ∞Êó∂Èó¥üíó
				timeNumber: 0,//üåüüíó
				ProgressBarBottom: 20,//ËøõÂ∫¶Êù°Á¶ªÂ∫ïÈÉ®ÁöÑË∑ùÁ¶ªüíó
				object_fit: 'contain',//ËßÜÈ¢ëÊ†∑ÂºèÈªòËÆ§ÂåÖÂê´üåüüíó
				mode: 'aspectFit',//ÂõæÁâáÂ∞ÅÈù¢Ê†∑Âºèüåüüíó
				timeout: "",//üåüÁî®Êù•ÈòªÊ≠¢ setTimeout()ÊñπÊ≥ï
				voice: "",//üåüÁî®Êù•ÈòªÊ≠¢ setTimeout()ÊñπÊ≥ï
				oldVideo: "",
				
				isAutoplay: false,//ÊòØÂê¶ÂºÄÂêØËá™Âä®Êí≠Êîæ(ÈªòËÆ§‰∏çÂºÄÂêØ)
				autoplayText: "ÂºÄÂêØËá™Âä®Êí≠Êîæ",
				timers: "",
				
				// ÂºïÂÖ•ËØÑËÆ∫ - ÂèÇÊï∞
				heightNum: 1.18,
				
				// ÂèåÂáªÁÇπËµûÂèÇÊï∞
				touchNum: 0,
				aixinLeft: 0,
				aixinTop: 0,
				isShowAixin: false,
				Rotate: 0,
				currentNav:1,
				limit: 6,
				page: 1
			}
        },
		components:{
			douyinScrollview,
			goodsList
		},
		watch:{
			async k(k,old_k){//ÁõëÂê¨ k ÂÄºÁöÑÂèòÂåñÔºåÂèØ‰ª•ÊéßÂà∂ËßÜÈ¢ëÁöÑÊí≠Êîæ‰∏éÊöÇÂÅú
				// console.log('ÁöÑÁÇπÁÇπÊª¥Êª¥Â§ö',this.dataList[k].id);
				this.dataList[old_k].state = 'stop'//Â¶ÇÊûúÊòØË¢´ÊªëËµ∞ÁöÑËßÜÈ¢ëÔºåÂ∞±ÂÅúÊ≠¢Êí≠Êîæ
				this.dataList[old_k].playIng = false//Â¶ÇÊûúËßÜÈ¢ëÊöÇÂÅúÔºåÂ∞±Âä†ËΩΩÂ∞ÅÈù¢
				this.dataList[old_k].isplay = true
				// uni.createVideoContext(this.dataList[old_k].id,this).seek(0)
				uni.createVideoContext(this.dataList[old_k].id,this).play()
				clearTimeout(this.oldVideo)
				this.oldVideo = await setTimeout(()=>{
					uni.createVideoContext(this.dataList[old_k].id,this).seek(0)
					uni.createVideoContext(this.dataList[old_k].id,this).pause()
					console.log('È¢ÑÁïôÁ¨¨' + (old_k + 1) + '‰∏™ËßÜÈ¢ëÔºö' + this.dataList[old_k].id)
				},500)
				
				uni.createVideoContext(this.dataList[k].id,this).play();
				clearTimeout(this.voice)
				this.voice = await setTimeout(()=>{
					this.dataList[k].isplay = false
				},300)
				await setTimeout(()=>{
					this.dataList[k].playIng = true
				},850)
				//„Äê2.0ÁâàÊú¨Êõ¥Êñ∞ÂÜÖÂÆπ„Äë- start
				var p = k
				++p
				await setTimeout(async ()=>{
					uni.createVideoContext(this.dataList[p].id,this).play()
					clearTimeout(this.timeout)
					this.timeout = await setTimeout(()=>{
						uni.createVideoContext(this.dataList[p].id,this).seek(0)
						uni.createVideoContext(this.dataList[p].id,this).pause()
						console.log('È¢ÑÂä†ËΩΩÁ¨¨' + (p + 1) + '‰∏™ËßÜÈ¢ëÔºö' + this.dataList[p].id)
					},1500)
				},20)
				//„Äê2.0ÁâàÊú¨Êõ¥Êñ∞ÂÜÖÂÆπ„Äë- end
				//„ÄêÊ≠§Â§ÑÂ§ÑÁêÜËøõÂ∫¶Êù°Âç°‰ΩèÁöÑÈóÆÈ¢ò„Äë
				if(uni.getSystemInfoSync().platform !== 'ios'){
					await setTimeout(()=>{
						uni.createVideoContext(this.dataList[k].id,this).pause()
						uni.createVideoContext(this.dataList[k].id,this).play()
					},100)
				}
			}
		},
		onShow(){
			console.log('ÂõûÂà∞ÂâçÂè∞');
			if(this.dataList.length !== 0){
				this.dataList[this.k].state = 'play';
				uni.createVideoContext(this.dataList[this.k].id,this).play()
			}
		},
		onHide(){
			this.dataList[this.k].state = 'pause';//ÁïåÈù¢ÈöêËóè‰πüË¶ÅÂÅúÊ≠¢Êí≠ÊîæËßÜÈ¢ë
			uni.createVideoContext(this.dataList[this.k].id,this).pause();//ÊöÇÂÅú‰ª•ÂêéÁªßÁª≠Êí≠Êîæ
			console.log('Âà∞ÂêéÂè∞');
		},
		onLoad(options){
			this.videoID = options.id || 0;
			if (options.spid) app.globalData.spid = options.spid;
			console.log('Âà∞ÂêéÂè∞');
			this.platform = uni.getSystemInfoSync().platform
			var model = uni.getSystemInfoSync().model
			if(this.platform == 'ios' && (model !== 'iPhone6' || model !== 'iPhone6s' || model !== 'iPhone7' || model !== 'iPhone8')){
				this.deleteHeight = 32//Êúâ tabbarÁöÑ ‰øÆÊîπËøôÈáåÂèØ‰ª•ÊîπÂèòËßÜÈ¢ëÈ´òÂ∫¶
				
				 /*
				 ÂºïÂÖ•ËØÑËÆ∫ÂèÇÊï∞
				 */
				
				this.heightNum = 1.27
			} else {
				this.deleteHeight = 0
				/*
				ÂºïÂÖ•ËØÑËÆ∫ÂèÇÊï∞
				*/
				this.heightNum = 1.18
			}
			
			this.windowWidth = uni.getSystemInfoSync().screenWidth//Ëé∑ÂèñÂ±èÂπïÂÆΩÂ∫¶
			this.boxStyle.width = this.windowWidth + 'px'//ÁªôÂÆΩÂ∫¶Âä†px
			this.wHeight = uni.getSystemInfoSync().screenHeight;//Ëé∑ÂèñÂ±èÂπïÈ´òÂ∫¶
			this.boxStyle.height = this.wHeight - this.deleteHeight;//ÊîπÂèòËßÜÈ¢ëÈ´òÂ∫¶
			this.get()//Ëøô‰∏ÄÊ≠•ÔºåÂä†ËΩΩËßÜÈ¢ëÊï∞ÊçÆ
			if (this.isLogin) {
				this.getCartNum()
			}
		},
		onReady() {
		},
    methods: {
			getCartNum: function() {
				getCartCounts().then(res => {
					this.$store.commit('indexData/setCartNum', res.data.count > 99 ? '..' : res.data.count + '')
				});
			},
			goIndex(){
				uni.switchTab({
					url: '/pages/index/index'
				})
			},
			goCarts(){
				uni.switchTab({
					url: '/pages/order_addcart/order_addcart'
				})
			},
			goUser(){
				uni.switchTab({
					url: '/pages/user/index'
				})
			},
			pinlunFun(e){
				let videoID = uni.getStorageSync("videoID");
				this.dataList.forEach(item=>{
					if(item.id == videoID){
						item.comment_num = e;
					}
				})
			},
			cShare(id){
				markeVideo('share',id).then(res=>{}).catch(err=>{
					return uni.showToast({
						title: err,
						icon: 'none',
						duration: 2000
					});
				})
			},
			// ÂàÜ‰∫´
			// #ifdef APP-PLUS
			appShare(scene,id) {
				let that = this
				uni.showLoading({
					title: 'Âä†ËΩΩ‰∏≠',
					mask: true
				});
				let uid = this.uid?this.uid:0;
				let data = this.dataList[this.k];
				let routes = getCurrentPages(); // Ëé∑ÂèñÂΩìÂâçÊâìÂºÄËøáÁöÑÈ°µÈù¢Ë∑ØÁî±Êï∞ÁªÑ
				let curRoute = routes[routes.length - 1].$page.fullPath // Ëé∑ÂèñÂΩìÂâçÈ°µÈù¢Ë∑ØÁî±Ôºå‰πüÂ∞±ÊòØÊúÄÂêé‰∏Ä‰∏™ÊâìÂºÄÁöÑÈ°µÈù¢Ë∑ØÁî±
				uni.share({
					provider: "weixin",
					scene: scene,
					type: 0,
					href: `${HTTP_REQUEST_URL}${curRoute}&spid=${that.uid}&id=${id}`,
					title: data.type_name || '',
					summary: data.desc || '',
					imageUrl: data.image || '',
					success: function(res) {
						uni.hideLoading();	
						that.cShare(id);
					},
					fail: function(err) {
						uni.showToast({
							title: 'ÂàÜ‰∫´Â§±Ë¥•',
							icon: 'none',
							duration: 2000
						})
					}
				});
			},
			// #endif
			onMyEvent: function() {
				this.$set(this, 'isGoods', false);
			},
			goCart(item){
				if (this.isLogin === false) {
					return toLogin();
				}
				// uni.showToast({
				// 	title: 'Âä†ËΩΩ‰∏≠...',
				// 	icon: 'none',
				// 	position: 'bottom',
				// 	duration: 300
				// })
				uni.setStorageSync("videoID",parseInt(item.id));
				this.$refs.pinglunGoods.open('bottom');
			},
			navTap(n){
				this.currentNav = n;
				this.oldVideo = "";
				this.k = 0;
				this.page = 1;
				this.dataList = [];
				this.get();
			},
			moreTap(item){
				item.isMore = !item.isMore;
			},
			autoPlay(){ 
				this.isAutoplay = !this.isAutoplay;
				if(!this.isAutoplay){
					this.autoplayText = "ÂºÄÂêØËá™Âä®Êí≠Êîæ"
					uni.showToast({
						title: "ÂÖ≥Èó≠Ëá™Âä®Êí≠Êîæ",
						icon: 'none',
						duration: 3000
					})
				} else {
					this.autoplayText = "ÂÖ≥Èó≠Ëá™Âä®Êí≠Êîæ"
					uni.showToast({
						title: "ÂºÄÂêØËá™Âä®Êí≠Êîæ",
						icon: 'none',
						duration: 3000
					})
				}
			},
			getData(){
				// ËøôÈáåÂ∞±ÊòØÊï∞ÊçÆÂä†ËΩΩÂÆå‰ª•ÂêéÂÜçÂêëÂêéÁ´ØÂèëÈÄÅÊï∞ÊçÆÁöÑÂú∞Êñπ,
					videoList({
							page: this.page,
							limit: this.limit,
							order_type: this.currentNav,
							id: (this.page > 1 || this.currentNav == 2) ? 0 : this.videoID
						}).then(res=>{
						this.page = this.page + 1;
						var msg = res.data
						for (let i = 0; i < msg.length; i++) {
							this.dataList.push(msg[i])
						}
					}).catch(err=>{
						return uni.showToast({								title: err,								icon: 'none',								duration: 2000							});
					})
			},
			touchstart(event){
				this.dataList[this.k].isShowimage = true //ÂàöËß¶Êë∏ÁöÑÊó∂ÂÄôÂ∞±Ë¶ÅÊòæÁ§∫È¢ÑËßàËßÜÈ¢ëÂõæÁâá‰∫Ü
				this.dataList[this.k].isShowProgressBarTime = true //ÊòæÁ§∫Êó∂Èó¥Á∫ø
				this.ProgressBarOpacity = 1 //ËÆ©ÊªëÂùóÊòæÁ§∫Ëµ∑Êù•Êõ¥ÊòéÊòæ‰∏ÄÁÇπ
				this.dotWidth = 10 //ËÆ©ÁÇπÊòæÁ§∫Ëµ∑Êù•Êõ¥ÊòéÊòæ‰∏ÄÁÇπ
			},
			touchend(){//ÂΩìÊâãÊùæÂºÄÂêéÔºåË∑≥Âà∞ÊúÄÊñ∞Êó∂Èó¥
				uni.createVideoContext(this.dataList[this.k].id,this).seek(this.newTime)
				if(this.dataList[this.k].state == 'pause'){
					this.dataList[this.k].state = 'play'
					uni.createVideoContext(this.dataList[this.k].id,this).play()
				}
				this.dataList[this.k].isShowProgressBarTime = false //Ëß¶Êë∏ÁªìÊùüÂêéÔºåÈöêËóèÊó∂Èó¥Á∫ø
				this.dataList[this.k].isShowimage = false //Ëß¶Êë∏ÁªìÊùüÂêéÔºåÈöêËóèÊó∂Èó¥È¢ÑËßà
				this.ProgressBarOpacity = 0.5 //ÈöêËóèËµ∑Êù•ËøõÂ∫¶Êù°Ôºå‰∏çÈÇ£‰πàÊòéÊòæ‰∫Ü
				this.dotWidth = 0 //ÈöêËóèËµ∑Êù•ËøõÂ∫¶Êù°Ôºå‰∏çÈÇ£‰πàÊòéÊòæ‰∫Ü
			},
			touchmove(event){//ÂΩìÊâãÁßªÂä®ÊªëÂùóÊó∂ÔºåËÆ°ÁÆó‰ΩçÁΩÆ„ÄÅÁôæÂàÜÂ∞èÊï∞„ÄÅÊñ∞ÁöÑÊó∂Èó¥
				var msg = []
				if(this.videoTime !== ''){
					msg = this.videoTime.split(':')
				}
				var timeNumber = Number(msg[0])*60 + Number(msg[1])
				this.currentPositions = event.changedTouches[0].screenX
				this.percent = this.currentPositions / this.windowWidth
				this.newTime = this.percent*timeNumber 
				this.currenttimes = parseInt(this.newTime)
				let theTime = this.newTime
				let middle = 0;// ÂàÜ
				if(theTime > 60) {
					middle = parseInt(theTime/60);
					theTime = parseInt(theTime%60);	
				}
				this.changeTime = `${Math.round(middle)>9?Math.round(middle):'0'+Math.round(middle)}:${Math.round(theTime)>9?Math.round(theTime):'0'+Math.round(theTime)}`
			},
			timeupdate(event,index){//ËÆ°ÁÆóÊªëÂùóÂΩìÂâç‰ΩçÁΩÆÔºåËÆ°ÁÆóÂΩìÂâçÁôæÂàÜÂ∞èÊï∞
				// console.log(index)
				if(index == this.k){
					// console.log(event)
					var currenttime = event.detail.currentTime
					this.timeNumber = Math.round(event.detail.duration)
					this.getTime()
					this.percent = currenttime/this.timeNumber
					this.currentPosition = this.windowWidth*this.percent
					let theTime = currenttime
					let middle = 0;// ÂàÜ
					if(theTime > 60) {
						middle = parseInt(theTime/60);
						theTime = parseInt(theTime%60);	
					}
					this.changeTime = `${Math.round(middle)>9?Math.round(middle):'0'+Math.round(middle)}:${Math.round(theTime)>9?Math.round(theTime):'0'+Math.round(theTime)}`
					//Ëá™Âä®ÂàáÊç¢ËßÜÈ¢ë
					if(this.isAutoplay){//true,‰ª£Ë°®Ëá™Âä®Êí≠Êîæ
						if(Math.round(currenttime) == this.timeNumber - 1){
							const dom = uni.requireNativePlugin('dom')
							let doms = 'item'+(this.k+1)
							setTimeout(()=>{
								let el = this.$refs[doms][0]
								dom.scrollToElement(el,{
									offset: 0,
									animated: true
								})
							},500)
						}
					}
				}
			},
			getTime(){//ÂæóÂà∞Êó∂Èó¥ÂáΩÊï∞
				this.videoTime = this.formatSeconds(this.timeNumber);
				// console.log(that.videoTime)
				var msg = []
				if(this.videoTime !== ''){
					msg = this.videoTime.split(':')
				}
				this.videoTimes = `${msg[0]>9?msg[0]:'0'+msg[0]}:${msg[1]>9?msg[1]:'0'+msg[1]}`;
			},
			formatSeconds(value) {//Ëé∑ÂèñÊó∂Èó¥ÂáΩÊï∞
				let theTime = parseInt(value);// Áßí
				let middle= 0;// ÂàÜ
				if(theTime > 60) {
					middle= parseInt(theTime/60);
					theTime = parseInt(theTime%60);	
				}
				return `${middle>9?middle:middle}:${theTime>9?theTime:theTime}`;
			},
			playIngs(index) {
				//
			},
			moreVideo(index){
				
			},
			toVideo(index){
				
			},
			erweima(){
				
			},
			tozuozhe(item){
				this.currents = 1//ÁÇπÂáªÂ§¥ÂÉè‰ª•ÂêéÂ∞±‰ºöÂàáÊç¢
				if(item.type==0){
					uni.reLaunch({
						url: `/pages/index/index`
					});
				}else{
					uni.reLaunch({
						url: `/pages/store_cate/store_cate?id=`+item.relation_id
					});
				}
			},
			stop(){
				// console.log('stop')
			},
			scrolls (event) {
				this.isDragging = event.isDragging
				if (!event.isDragging) {//isDraggingÔºöÂà§Êñ≠Áî®Êà∑ÊòØ‰∏çÊòØÂú®ÊªëÂä®ÔºåÊªëÂä®ÔºötrueÔºåÂÅúÊ≠¢ÊªëÂä®Ôºöfalse„ÄÇÊàë‰ª¨Ë¶ÅÁî®Êà∑ÂÅúÊ≠¢ÊªëÂä®Êó∂ÊâçÁªô k ËµãÂÄºÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÈÅøÂÖçÂæàÂ§öÈ∫ªÁÉ¶
					var i = Math.round(Math.abs(event.contentOffset.y) / (this.wHeight - this.deleteHeight + 1))//ÂÖàÁî®ÁªùÂØπÂÄºÂèñÂá∫ÊªëÂä®ÁöÑË∑ùÁ¶ªÔºåÁÑ∂ÂêéÈô§‰ª•Â±èÂπïÈ´òÂ∫¶ÔºåÂèñ‰∏Ä‰∏™Êï¥ÔºåÂ∞±Áü•ÈÅì‰Ω†Áé∞Âú®ÊªëÂä®Âà∞Âì™‰∏Ä‰∏™ËßÜÈ¢ë‰∫Ü
					if(i !== this.k){//ËøôÈáåÂä†Âà§Êñ≠ÊòØÂõ†‰∏∫Ëøô‰∏™ÊñπÊ≥ï‰ºöÊâßË°åÂæàÂ§öÊ¨°Ôºå‰ºöÈÄ†ÊàêÈáçÂ§çËØ∑Ê±ÇÔºåÊâÄ‰ª•ËøôÈáåÂÜô‰∏Ä‰∏™ÈôêÂà∂
						if(uni.getSystemInfoSync().platform == 'ios'){
							this.k = i//Âà§Êñ≠‰∫ÜÁî®Êà∑Ê≤°ÊúâÊªëÂä®ÔºåÁ°ÆËÆ§‰∫ÜÁî®Êà∑ÁöÑÁ°ÆÊòØÂú®ÁúãËøô‰∏™ËßÜÈ¢ëÔºåÁÑ∂ÂêéÂ∞±ËµãÂÄºÂï¶
							this.dataList[this.k].state = 'play'
							console.log('Ê≠£Âú®Êí≠Êîæ --> Á¨¨' + (this.k + 1) + '‰∏™ËßÜÈ¢ëÔΩû')
						} else {
							clearTimeout(this.timers);
							this.timers = setTimeout(()=>{
								this.k = i//Âà§Êñ≠‰∫ÜÁî®Êà∑Ê≤°ÊúâÊªëÂä®ÔºåÁ°ÆËÆ§‰∫ÜÁî®Êà∑ÁöÑÁ°ÆÊòØÂú®ÁúãËøô‰∏™ËßÜÈ¢ëÔºåÁÑ∂ÂêéÂ∞±ËµãÂÄºÂï¶
								this.dataList[this.k].state = 'play'
								console.log('Ê≠£Âú®Êí≠Êîæ --> Á¨¨' + (this.k + 1) + '‰∏™ËßÜÈ¢ëÔΩû')
							},80)
						}
					}
				}
			},
			get(){
				// Ëøô‰∏™ÊñπÊ≥ï‰∏ªË¶ÅÂ∞±ÊòØÁî®Êù•Á¨¨‰∏ÄÊ¨°ËøõÂÖ•ËßÜÈ¢ëÊí≠ÊîæÊó∂Áî®Êù•Â§ÑÁêÜÁöÑ
				videoList({
						page: this.page,
						limit: this.limit,
						order_type: this.currentNav,
						id: (this.page > 1 || this.currentNav == 2) ? 0 : this.videoID
					}).then(async (res)=>{
					this.page = this.page + 1;	
					var msg = res.data;
					this.dataList = msg;
					this.dataList[0].state = "play";
					await setTimeout(()=>{
						//ËøôÈáåÁöÑÂª∂ËøüÊòØ‰∏∫‰∫ÜÈÅøÂÖçÊâßË°åÊó∂Èó¥Â§™Âø´ËÄåÁõ¥Êé•Ë∑≥ËøáÊâßË°åÁöÑbug
						uni.createVideoContext(this.dataList[0].id,this).seek(0)
						uni.createVideoContext(this.dataList[0].id,this).play()
					},200)
					this.dataList[0].isplay = false
					await setTimeout(()=>{
						this.dataList[0].playIng = true
					},500)
					var p = 0
					await setTimeout(async ()=>{
						++p
						uni.createVideoContext(this.dataList[p].id,this).play()
						await setTimeout(()=>{
							uni.createVideoContext(this.dataList[p].id,this).seek(0)
							uni.createVideoContext(this.dataList[p].id,this).pause()
							console.log('È¢ÑÂä†ËΩΩÁ¨¨' + (p + 1) + '‰∏™ËßÜÈ¢ësÔºö' + this.dataList[p].id)
						},800)
					},50)
				}).catch(err=>{
					return uni.showToast({
							title: err,
							icon: 'none',
							duration: 2000
						});
				})
			},
			onpullingdown(){
				// console.log('Ê≠£Âú®‰∏ãÊãâÂà∑Êñ∞ÔºåÊ≠§Êó∂ÊâãËøòÂú®Ëß¶Êë∏Ê≤°ÊúâÊùæÂºÄ')
				this.refreshing = true
			},
			onrefresh(){
				// console.log('‰∏ãÊãâÂà∑Êñ∞ÂÆåÊØïÔºåÊ≠§Êó∂ÊâãÊùæÂºÄ‰∫Ü')
				setTimeout(()=>{
					this.refreshing = false
				},1000)
			},
			// ÂèåÂáªÁÇπËµûÊïàÊûú
			touchstartHover(event){
				if(this.touchNum >= 1){
					// console.log('ÂèåÂáª -- XÂùêÊ†áÔºö'+ event.touches[0].screenX);
					// console.log('ÂèåÂáª -- YÂùêÊ†áÔºö'+ event.touches[0].screenY);
					this.aixinLeft = event.touches[0].screenX - 50;
					this.aixinTop =  event.touches[0].screenY - 50;
					this.isShowAixin = true;
					let max = 40; let min = -40;
					this.Rotate = Math.floor(Math.random() * (max - min + 1)) + min;
					setTimeout(()=>{
						this.isShowAixin = false;
					},700)
					this.onTabItemTaps();
				}
			},
			//ÁÇπÂáªÊí≠Êîæ&&ÊöÇÂÅú
			tapVideoHover(state,event){
				this.dataList[this.k].isShowimage = false
				this.dataList[this.k].isShowProgressBarTime = false
				this.ProgressBarOpacity = 0.5
				this.dotWidth = 0
				console.log('state--',state);
				// 1.ÂêØÁî®ÂèåÂáªÁÇπËµû --- start
				this.touchNum++;
				setTimeout(()=>{
					if(this.touchNum == 1){
						if(state=='play'||state=='continue'){
							this.dataList[this.k].state = 'pause';
						}else{
							this.dataList[this.k].state = 'continue';
						}
						if(this.dataList[this.k].state == 'continue'){
							uni.createVideoContext(this.dataList[this.k].id,this).play();//ÊöÇÂÅú‰ª•ÂêéÁªßÁª≠Êí≠Êîæ
						}
						if(this.dataList[this.k].state == 'pause'){
							uni.createVideoContext(this.dataList[this.k].id,this).pause();//ÊöÇÂÅú‰ª•ÂêéÁªßÁª≠Êí≠Êîæ
						}
					}
					if(this.touchNum >= 2){
						this.doubleLike();
					}
					this.touchNum = 0;
				},200)
				// --------------- ending
				// 2. ‰∏çÂêØÁî®ÂèåÂáªÁÇπËµû start
				// if(state=='play'||state=='continue'){
				// 	this.dataList[this.k].state = 'pause';
				// }else{
				// 	this.dataList[this.k].state = 'continue';
				// }
				// if(this.dataList[this.k].state == 'continue'){
				// 	uni.createVideoContext(this.dataList[this.k].id,this).play();//ÊöÇÂÅú‰ª•ÂêéÁªßÁª≠Êí≠Êîæ
				// }
				// if(this.dataList[this.k].state == 'pause'){
				// 	uni.createVideoContext(this.dataList[this.k].id,this).pause();//ÊöÇÂÅú‰ª•ÂêéÁªßÁª≠Êí≠Êîæ
				// }
				// --------------- ending
			},
			doubleLike(){
				if(this.dataList[this.k].is_like == false){
					this.dataList[this.k].like_num += 1;
					this.dataList[this.k].is_like = true;
				}
				/*
				ÁÇπËµû
				*/
			},
			toComment(item){
				// Ê≥®ÊÑèÁÇπÂáªËØÑËÆ∫‰πãÂêé‰ºöÊâßË°åËøôÈáå
				/*
				Ôºà1ÔºâÂÖàÂä†ËΩΩÁºìÂÜ≤
				Ôºà2ÔºâËé∑ÂèñÂΩìÂâçËßÜÈ¢ë ID ‰ø°ÊÅØ
				Ôºà3ÔºâüåüüåüüåüüåüÈáçË¶Åüåüüåüüåüüåü
					- ‰∏ÄÂÆöË¶ÅËÆ∞ÂæóÁúã index.vue ÈáåÈù¢
					 uni.setStorageSync("user",this.peopleList[i]);
					 Ëøô‰∏™‰∏úË•øÔºåÁî®‰∫éÂ≠òÂÇ®ÂΩìÂâçÁî®Êà∑‰ø°ÊÅØ„ÄÇÂú® Êèí‰ª∂ÈáåÈù¢‰ºö‰ΩøÁî®Âà∞Ëøô‰∏™‰∏úË•øÔºå
					 ËÆ∞ÂæóÂÜô‰∏Ä‰∏ã„ÄÇ
					 
				Ôºà4ÔºâÊâìÂºÄËØÑËÆ∫
				*/ 
				uni.showToast({
					title: 'Âä†ËΩΩ‰∏≠...',
					icon: 'none',
					position: 'bottom',
					duration: 300
				})
				uni.setStorageSync("videoID",parseInt(item.id));
				uni.setStorageSync("pinlunNum",item.comment_num);
				this.$refs.pinglun.open('bottom')
			},
			wxh5Video(){
				uni.navigateTo({
					url: '../wxh5previewVideo/wxh5previewVideo'
				})
			},
			previewVideo(){
				uni.navigateTo({
					url: '../previewVideo/previewVideo'
				})
			},
			toTwoVideo(){
				uni.navigateTo({
					url: '../new_index/new_index'
				})
			},
			tolistVideo(){
				uni.navigateTo({
					url: '../nvueSwiper/nvueSwiper'
				})
			},
			cLike(item){
				markeVideo('like',item.id).then(res=>{
					this.dataList[this.k].is_like = !this.dataList[this.k].is_like
					const video = this.dataList[this.k];
					item.is_like?video.like_num += 1:video.like_num -= 1;
				}).catch(err=>{
					return uni.showToast({
							title: err,
							icon: 'none',
							duration: 2000
						});
				})
				/*
				ÁÇπËµû
				*/
			},
			/*
			Êî∂Ëóè
			*/
			cCollect(item){
				markeVideo('collect',item.id).then(res=>{
					this.dataList[this.k].is_collect = !this.dataList[this.k].is_collect
					const video = this.dataList[this.k];
					item.is_collect?video.collect_num += 1:video.collect_num -= 1;
				}).catch(err=>{
					return uni.showToast({
							title: err,
							icon: 'none',
							duration: 2000
						});
				})
			},
			moveHandle(){},
			closeScrollview(){
				// ÁÇπÂáªËØÑËÆ∫ÈáåÈù¢ÁöÑÂèâÂèâÔºåÂ∞±‰ºöÂÖ≥Èó≠ËØÑËÆ∫ 
				this.$refs.pinglun.close();
			},
			onTabItemTaps() {
			    // #ifdef APP-PLUS
			    if (uni.getSystemInfoSync().platform == "ios") {
			        let UIImpactFeedbackGenerator = plus.ios.importClass('UIImpactFeedbackGenerator');
			        let impact = new UIImpactFeedbackGenerator();
			        impact.prepare();
			        impact.init(1);
			        impact.impactOccurred();
			    }
			    if (uni.getSystemInfoSync().platform == "android") {
			        uni.vibrateShort({
			            success: () => {
			                console.log('ÁÇπÂáªÈúáÂä®');
			            }
			        });
			    }
			    // #endif
			}
        }
    }
</script>
<style lang="scss">
	.shares{
		opacity: 0.9; 
		margin-top: 17px;
		.img{
			width: 31px; 
			height: 24px; 
			position: absolute;
			right: 5px;
		}
		.text{
			color: #FFFFFF; 
			margin-top: 5px; 
			font-size: 12px; 
			text-align: center; 
			font-weight: bold; 
			margin-top: 30px;
		}
	}
	.noVideo{
		position: fixed;
		top: 400rpx;
		z-index: 9;
		width:750rpx;
		flex-direction: row;
		justify-content: center;
		.pictrue{
			width: 414rpx;
			height: 256rpx;
		}
		.tips{
			text-align: center;
			margin-top: 14rpx;
			font-size: 26rpx;
			color: #999;
		}
	}
	.footer{
		align-items: center;
		justify-content: space-around;
		flex-direction: row;
		background-color: #161616;
		height: 100rpx;
		position: fixed;
		bottom: 0;
		z-index: 9;
		width: 750rpx;
		line-height: 100rpx;
		.items{
			color: #999999;
			font-size: 30rpx;
			width: 50%;
			text-align: center;
			.itemCon{
				position: relative;
			}
			.cart{
				color: #999999;
				font-size: 30rpx;
				display: flex;
				height: 100rpx;
				line-height: 100rpx;
			}
			&.on{
				color: #fff;
			}
			.uni-badge-left-margin{
				position: absolute;
				right: 0px;
				top: 5px;
			}
			.uni-badge{
				border: 1px solid #e93323;
				background-color: #e93323;
			}
			.cartNum{
				position:absolute;
				height: 28rpx;
				background: #E93323;
				border-radius: 15rpx;
				color: #fff;
				line-height: 27rpx;
				padding: 0 8rpx;
				right: 0px;
				top: 20rpx;
				font-size: 22rpx;
			}
		}
	}
	.header{
		position: fixed;
		z-index: 9;
		width: 750rpx;
		height: 86rpx;
		flex-direction:row;
		justify-content: center;
		top: 80rpx;
		.items{
			margin: 0 30rpx;
			.tName{
				color: rgba(255,255,255,0.7);
				font-size: 32rpx;
				&.on{
					color: rgba(255,255,255,0.95);
					font-weight: 600;
				}
			}
			.tLine{
				width: 30rpx;
				height: 4rpx;
				background: #FFFFFF;
				border-radius: 2rpx;
				margin-left: 15rpx;
				margin-top: 10rpx;
			}
		}
	}
	.container {background-color: #000000;}
    .item {
		/* width : 750rpx; */
		background-color: #000000;
		position: relative;
	}
	.videoHover{
		position: absolute;
		top: 0;
		left: 0;
		flex: 1;
		background-color: rgba(0,0,0,0.1);
		justify-content: center;
		align-items: center;
		
		/* border-style: dashed;
		border-color: #DD524D;
		border-width: 1px; */
	}
	.playState{
		width:  160rpx;
		height: 160rpx;
		opacity: 0.2;
	}
	.userInfo{
		position: absolute;
		bottom:160px;
		right: 10px;
		flex-direction: column;
		
	}
	.userAvatar{
		border-radius: 500%;
		margin-bottom: 15px;
		border-style: solid;
		border-width: 2px;
		border-color: #ffffff;
	}
	.userAvatar{
		width : 80rpx;
		height: 80rpx;
	}
	.likeIco,.shareIco,.commentIco{
		width : 60rpx;
		height: 60rpx;
		margin-top: 15px;
	}
	.likeNum,.commentNum,.shareTex{
		color: #ffffff;
		font-size: 30rpx;
		text-align: center;
		margin: 5px;
	}
	.content{
	  width: 720rpx;
	  z-index: 99;
	  position: absolute;
	  bottom: 80px;
	  /* justify-content: center; */
	  padding: 15rpx;
	  flex-direction: column;
	  justify-content: flex-start;
	  color: #ffffff;
	  left:5px;
		.time{
			font-size: 24rpx;
			color: rgba(255,255,255,0.5);
			margin-left: 12rpx;
		}
		.cart{
			background: rgba(153,153,153,0.3);
			width: 376rpx;
			height: 48rpx;
			border-radius: 4rpx;
			margin-bottom: 22rpx;
			flex-direction:row;
			justify-content: center;
			align-items: center;
			.cartPic{
				width: 36rpx;
				height: 36rpx;
				margin-right: 14rpx;
			}
			.cartName{
				font-size: 24rpx;
				color: #fff;
			}
			.line{
				width: 2rpx;
				height: 22rpx;
				background-color: rgba(255,255,255,0.3);
				margin: 0 12rpx;
			}
		}
	}
	.timeCon{
		flex-direction:row;
		align-items: center;
		.userName {
		  font-size: 30rpx;
		  color: #ffffff;
		}
	}
	.words {
	  margin-top: 20rpx;
		.close{
			display: flex;
			flex-direction: row;
			align-items: center;
			justify-content: flex-end;
			margin-right: 20rpx;
			.imgClose{
				width: 18rpx;
				height: 10rpx;
				margin-left: 10rpx;
			}
		}
		.wordsCon{
			position: relative;
			.more{
				position: absolute;
				bottom: 0;
				right: 40rpx;
				font-size: 26rpx;
			}
			.img{
				width: 18rpx;
				height: 10rpx;
				margin-left: 4rpx;
				position: absolute;
				bottom: 7rpx;
				right: 20rpx;
			}
		}
		.info{
			color: #fff;
			font-size: 28rpx;
		}
		.more{
			font-size: 26rpx;
			color: #AAAAAA;
			font-weight: 400;
		}
	}
	.root{
		background-color: #000000;
	}
</style>
