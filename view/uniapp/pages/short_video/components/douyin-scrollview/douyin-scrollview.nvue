<template>
	<view style="">
		<!-- <view style="height: 45upx;"></view> -->
		<image @click="closeSheet" class="closeBnt" :src="imgHost + '/statics/images/close.png'" mode=""></image>
		<text class="numberComment">{{pinlunNum}}æ¡è¯„è®º</text>
		<view
			:style="'width: '+ Width +'px; height: '+ (Height/num) +'px; margin-top: 20upx; background-color: #fff; display: flex; flex-direction: column;'">
			<text v-if="pinlunList.length == 0"
				:style="'font-size: 14px; font-weight: bold; color: #a3a1a4; margin-top: 150upx; margin-left: '+ (Width/2.9) +'px; position: absolute;'">
				ï½ å¿«æ¥è¯„è®ºå§ ï½</text>
			<list :show-scrollbar="false" :scrollable="true" @loadmore="loadmore" @scroll="scrolls">
				<cell v-for="(list,index) in pinlunList">
					<view :style="'width: '+ Width +'px; display: flex; flex-direction: row;'">
						<!-- 1.ç”¨æˆ·çš„å¤´åƒ -->
						<image :src="list.avatar" mode="aspectFill" class="pictrue"></image>
						<!-- 2.ä¸€çº§è¯„è®º -->
						<view
							:style="'width: '+ (Width*0.8) +'px; display: flex;  flex-direction: column; margin-top: 40upx; margin-left: 20upx;'">
							<!-- 3.ç”¨æˆ·åç§°ï¼Œå¹¶è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦ä¸ºè§†é¢‘ä½œè€… -->
							<view style="display: flex; flex-direction: row;">
								<text class="name">{{list.nickname}}</text>
								<image v-if="list.is_money_level>0" class="vip" src="@/static/images/vip.png"></image>
								<!-- 4.å¦‚æœæ˜¯è§†é¢‘ä½œè€…å°±æ˜¾ç¤º ä½œè€… -->
								<view v-if="list.uid == 0"
									style="background-color: #E43D33; border-radius: 5upx; margin-left: 15upx;height: 32upx;line-height: 32upx;">
									<text
										style="font-size: 8px; font-weight: bold; padding-left: 8upx; padding-right: 8upx; font-weight: bold; color: #FFFFFF;">å•†å®¶</text>
								</view>
							</view>
							<!-- 5. 
							
							ç”±äº rich-text æœ‰å¾ˆå¤š bug 
							æ‰€ä»¥è¿™é‡Œå·²ç»æ‘’å¼ƒäº†ï¼Œ
							ä½¿ç”¨è‡ªç ”æ–‡æœ¬è§£æå™¨ 
							
							-->
							<view @click="huifu(index)"
								:style="'width: '+ (Width*0.78) +'px; display: flex; flex-direction: row; flex-wrap: wrap; margin-top: 8upx;'">
								<text
									:style="'width: '+ (Width*0.78) +'px;font-size: 28rpx; font-weight: 400; color: #333; margin-left: 0upx;'">{{list.content}}</text>
								<!-- <rich-text :nodes="list.content"></rich-text> -->
							</view>
							<!-- 7.è¿™é‡Œå°±æ˜¯ æ—¶é—´ã€å›å¤ã€ç‚¹èµã€ç‚¹èµé‡æ˜¾ç¤ºçš„åœ°æ–¹ -->
							<view
								:style="'width: '+ (Width*0.8) +'px; height: 40upx; display: flex; flex-direction: row; margin-top: 25upx;'">
								<text style="font-size: 12px; color: #a3a1a4;">{{list.add_time}} Â· {{list.city?list.city:''}}</text>
								<text @click="huifu(index)" class="time">å›å¤</text>
								<!-- <text v-if="userID == list.userID" @click="deletepinlun(index)" class="time">åˆ é™¤</text> -->
								<image v-if="!list.is_like" class="like" @click="tolike(list,index)"
									:src="imgHost + '/statics/images/zan01.png'"></image>
								<image v-if="list.is_like" class="like" @click="tolike(list,index)"
									:src="imgHost + '/statics/images/zan02.png'"></image>
								<text class="likeNum" @click="tolike(list,index)">{{list.like_num}}</text>
							</view>
							<!-- 8.ç”¨æˆ·å›å¤çš„å­è¯„è®ºä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ 
							
							è¿™é‡Œ update ç”¨äºåˆ·æ–°è§†å›¾
							
							-->
							<block v-for="(li,inde) in list.reply" v-if="list.isShow">
								<view :style="'width: '+ (Width*0.8) +'px; display: flex; flex-direction: row;'">
									<!-- 9.å­è¯„è®º ç”¨æˆ·å¤´åƒ -->
									<image :src="li.avatar" mode="aspectFill" class="childrenPic"></image>
									<!-- 10.åŠ¨æ€è®¡ç®—å®½åº¦ å­è¯„è®ºåˆ—è¡¨ -->
									<view
										:style="'width: '+ (Width*0.8*0.87) +'px; display: flex;  flex-direction: column; margin-top: 40upx; margin-left: 20upx;'">
										<view style="display: flex; flex-direction: row;">
											<view style="display: flex; flex-direction: row;">
												<!-- 11.å›å¤è¯„è®ºçš„äººæ˜¾ç¤ºåœ¨è¿™é‡Œ -->
												<text class="childrenName">{{li.nickname}}</text>
												<image v-if="li.is_money_level>0" class="vip"
													src="@/static/images/vip.png"></image>
												<!-- 12.åŒæ—¶è¦åˆ¤æ–­è¯„è®ºäººæ˜¯ä¸æ˜¯ä½œè€…ï¼Œå¦‚æœæ˜¯ä½œè€…å°±åœ¨è¿™é‡Œæ˜¾ç¤º -->
												<view v-if="li.uid==0"
													style="background-color: #E43D33; border-radius: 5upx; margin-left: 15upx;height: 32upx;line-height: 32upx;">
													<text
														style="font-size: 8px; font-weight: bold; padding-left: 8upx; padding-right: 8upx; font-weight: bold; color: #FFFFFF;">å•†å®¶</text>
												</view>
											</view>
											<!-- 13.å›¾ç‰‡æ˜¯ä¸€ä¸ªå‘å³çš„å°å›¾æ ‡ -->
											<!-- <image src="../../static/douyin/you-3.png" style="width: 20upx; height: 20upx; margin-top: 5upx; margin-left: 10upx;"></image> -->
											<!-- 14.è¢«å›å¤ç”¨æˆ·çš„åç§° ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ -->
											<!-- 	<view style="display: flex; flex-direction: row; margin-left: 10upx;"> -->
											<!-- <text style="font-size: 12px; font-weight: bold; color: #a3a1a4;">{{li.gethuifuUser}}</text> -->
											<!-- 15.åŒæ—¶è¦åˆ¤æ–­è¯„è®ºäººæ˜¯ä¸æ˜¯ä½œè€…ï¼Œå¦‚æœæ˜¯ä½œè€…å°±åœ¨è¿™é‡Œæ˜¾ç¤º -->
											<!-- <view v-if="videouserID == li.gethuifuUserID" style="background-color: #E43D33; border-radius: 5upx; margin-left: 15upx;">
													<text style="font-size: 8px; font-weight: bold; padding: 5upx; padding-left: 8upx; padding-right: 8upx; font-weight: bold; color: #FFFFFF;">ä½œè€…</text>
												</view> -->
											<!-- </view> -->
										</view>
										<!-- 16.
										
										ç”±äº rich-text æœ‰å¾ˆå¤š bug 
										æ‰€ä»¥è¿™é‡Œå·²ç»æ‘’å¼ƒäº†ï¼Œ
										ä½¿ç”¨è‡ªç ”æ–‡æœ¬è¡¨æƒ…è§£æå™¨ 
										
										-->
										<view
											:style="'width: '+ (Width*0.8*0.85) +'px; display: flex; flex-direction: row; flex-wrap: wrap; margin-top: 8upx;word-break: break-all;'">
											<text
												:style="'width: '+ (Width*0.8*0.85) +'px;font-size: 28rpx; font-weight: 400; color: #333; margin-left: 0upx;'">{{li.content}}</text>
										</view>
										<!-- 17.å¦‚æœ å­è¯„è®º ç”¨æˆ·è¾“å…¥äº† GIF è¡¨æƒ…ï¼Œå°±ä¼šåœ¨è¿™é‡Œæ˜¾ç¤º -->
										<!-- <image v-if="li.imageURL !== ''" :src="li.imageURL" mode="aspectFill" style="width: 140upx; height: 140upx; margin-top: 20upx; border-radius: 10upx;"></image> -->
										<!-- 18.è¿™é‡Œå°±æ˜¯ æ—¶é—´ã€å›å¤ã€ç‚¹èµã€ç‚¹èµé‡æ˜¾ç¤ºçš„åœ°æ–¹ -->
										<view
											:style="'width: '+ (Width*0.8*0.87) +'px; height: 40upx; display: flex; flex-direction: row; margin-top: 16upx;'">
											<text style="font-size: 12px; color: #a3a1a4;">{{li.add_time}} Â· {{li.city?li.city:''}}</text>
											<!-- <text @click="sonhuifu(index,inde)" style="font-size: 12px; font-weight: bold; color: #a3a1a4; margin-left: 20upx;">å›å¤</text> -->
											<!-- 	<text v-if="userID == li.userID" @click="deletesonpinlun(index,inde)" class="time">åˆ é™¤</text> -->
											<image class="childrenLike" v-if="!li.is_like"
												@click="tosonlike(index,inde,li)"
												:src="imgHost + '/statics/images/zan01.png'"></image>
											<image class="childrenLike" v-if="li.is_like"
												@click="tosonlike(index,inde,li)"
												:src="imgHost + '/statics/images/zan02.png'"></image>
											<text class="childrenLikeNum"
												@click="tosonlike(index,inde,li)">{{li.like_num}}</text>
										</view>
									</view>
								</view>
							</block>
							<!-- 19ã€‚æ˜¾ç¤º ã€å±•å¼€xxæ¡è¯„è®ºã€‘ã€ã€æ”¶èµ·è¯„è®ºã€‘ -->
							<view v-if="list.reply_count > 0"
								:style="'width: '+ (Width*0.8) +'px; display: flex; flex-direction: row; margin-top: 30upx;'">
								<view
									style="width: 60upx; height: 1px; background-color: #a3a1a4; opacity: 0.6; margin-top: 13upx;">
								</view>
								<text @click="zhangkai(index,list)" v-if="list.reply_count!=list.reply.length"
									style="font-size: 12px; font-weight: bold; color: #cdcbd4; margin-left: 12upx;">å±•å¼€{{list.reply_count}}æ¡å›å¤</text>
								<text @click="shouqi(list)" v-if="list.reply.length"
									style="font-size: 12px; font-weight: bold; color: #cdcbd4; margin-left: 12upx;">æ”¶èµ·</text>
							</view>
						</view>
					</view>
					<!-- 20.ç•™ä¸€å®šçš„é«˜åº¦ä»¥å…è§†å›¾è¢«é®æŒ¡ -->
					<view v-if="index == (pinlunList.length-1)" :style="'width: '+ Width +'px; height: 80px;'"></view>
				</cell>
			</list>
		</view>
		<!-- 21.åº•éƒ¨ï¼Œæ¨¡æ‹Ÿå‡çš„è¾“å…¥æ¡† -->
		<view v-if="show && ischangepinlun==false" @touchstart="parentPinglun"
			:style="'width: '+ Width +'px; height: '+ plHeight +'px; background-color: #fff; position: fixed; bottom: 0;'">
			<view
				:style="'width: '+ (Width-30) +'px; height: 32px; margin-left: 15px; margin-top: 14upx; background-color: #eee; border-radius: 100upx; display: flex; flex-direction: row;'">
				<text v-if="platform=='ios'"
					style="font-size: 14px; color: #999; margin-top: 17upx; margin-left: 30upx;">è¯´ç‚¹ä»€ä¹ˆå‘—~</text>
				<text v-if="platform!=='ios'"
					style="font-size: 14px; color: #999; margin-top: 13upx; margin-left: 30upx;">è¯´ç‚¹ä»€ä¹ˆå‘—~</text>
				<image :src="imgHost + '/statics/images/send01.png'"
					style="width: 40upx; margin-top: 15upx; height: 40upx; position: absolute; right: 25upx;"></image>
			</view>
		</view>
		<view v-if="show && ischangepinlun==true" @touchstart="parentPinglun"
			:style="'width: '+ Width +'px; height: '+ plHeight +'px; background-color: #fff;'">
			<view
				:style="'width: '+ (Width-30) +'px; height: 32px;margin-left: 15px; margin-top: 20upx; background-color: #eee; border-radius: 100upx; display: flex; flex-direction: row;'">
				<text v-if="platform=='ios'"
					style="font-size: 14px; color: #a3a1a4; margin-top: 17upx; margin-left: 30upx;">è¯´ç‚¹ä»€ä¹ˆå‘—~</text>
				<text v-if="platform!=='ios'"
					style="font-size: 14px; color: #a3a1a4; margin-top: 13upx; margin-left: 30upx;">è¯´ç‚¹ä»€ä¹ˆå‘—~</text>
				<image :src="imgHost + '/statics/images/send01.png'"
					style="width: 40upx; margin-top: 15upx; height: 40upx; position: absolute; right: 25upx;"></image>
			</view>
		</view>
		<!-- 
		
		ä¸‹é¢å°±æ˜¯çœŸæ­£çš„è¯„è®ºæ¡†
		
		åŒ…å«ï¼š
		1.è¾“å…¥æ¡†
		2.è¡¨æƒ…è¾“å…¥æ¡†
		3.GIFè¡¨æƒ…åº“
		4.æœ€è¿‘ä½¿ç”¨è¡¨æƒ…å’Œå…¨éƒ¨è¡¨æƒ…
		5.è‡ªå·±ä¸Šä¼ è¡¨æƒ…
		6. @ è‡ªå·±çš„å¥½å‹
		7.è‡ªå¸¦å¾®åšè¡¨æƒ… å’Œ QQ è¡¨æƒ…
		8.èƒ½è®°å¿†è¾“å…¥
		
		 -->
		<uni-popup type="bottom" ref="openPinglun" @touchmove.stop.prevent="movehandle" @change="change">
			<view style="display: flex; flex-direction: column;">
				<view @click="openPinglun"
					:style="'width: '+ Width +'px; background-color: #FFFFFF; display: flex; flex-direction: row;'">
					<view
						:style="'width: '+ (Width-30)*percent +'px; margin-left: 15px; margin-top: 20upx; background-color: #f2f0f4; border-radius: '+ borderRadius +'upx; margin-bottom: 20upx; display: flex; flex-direction: row;'">
						<!-- 
						9.è¾“å…¥æ¡† 
						 -->
						<textarea
							:style="'width: '+ (Width-60)*percent +'px; height: 20px; margin-bottom: 20upx; font-size: 15px; color: #000000; margin-top: 20upx; margin-left: 30upx;'"
							:placeholder="placeholder" :cursor-spacing="cursorSpacing" :auto-focus="autoFocus"
							:auto-height="autoHeight" :adjust-position="adjustPosition" v-model="value" maxlength="150"
							@linechange="linechange" @keyboardheightchange="keyboardheightchange" @focus="focus"
							@click="clickTextarea" @blur="blur"></textarea>
						<!-- <image src="@/static/douyin/atuser.png" style="width: 70upx; height: 70upx; position: absolute; right: 110upx; margin-top: 8upx;"></image> -->
						<!-- 10.ç‚¹å‡»è¡¨æƒ…å±•å¼€è¯„è®ºæ¡† -->
						<!-- <image v-if="!isopen" @click="toemoji" src="@/static/douyin/biaoqing-2.png" style="width: 50upx; margin-top: 15upx; height: 50upx; position: absolute; right: 25upx;"></image>
						<image v-if="isopen" @click="toemoji" src="@/static/douyin/jianpan.png" style="width: 50upx; margin-top: 15upx; height: 50upx; position: absolute; right: 25upx;"></image> -->
					</view>
					<!-- 11.å‘é€æŒ‰é’®
					 
					 ç¬¦åˆï¼šæœ‰å†…å®¹ã€æˆ–è€…æ˜¯è¾“å…¥ GIF å›¾ç‰‡éƒ½å¯ä»¥é€šè¿‡
					 
					 -->
					<view v-if="(value!=='' || imageURL !== '') && isSend" @click="sendSMS"
						style="width: 30px; height: 30px; border-radius: 40px; margin-top: 30upx; margin-left: 20upx;">
						<image :src="imgHost + '/statics/images/send02.png'" style="width: 30px; height: 30px;"></image>
					</view>
				</view>
			</view>
			<!-- 12.ç”¨äºæ˜¾ç¤ºç”¨æˆ·é€‰æ‹©çš„ GIF å›¾ç‰‡ -->
			<view v-if="isShowImage" :style="'width: '+ Width +'px; height: 75px; background-color: #FFFFFF;'">
				<view style="display: flex; flex-direction: row;">
					<image :src="imageURL" mode="aspectFill"
						style="width: 120upx; height: 120upx; margin-top: 10upx; margin-left: 50upx;"></image>
					<!-- 	<image @click="deleteimageURL" src="../../static/douyin/zfxsc.png" style="width: 30upx; height: 30upx; position: absolute; margin-left: 140upx; margin-top: 12upx;"></image> -->
				</view>
			</view>
			<!-- 13.
			
			è¡¨æƒ… åŒº
			
			-->
			<view :style="'width: '+ Width +'px; height: '+ emojiHeight +'px; background-color: #FFFFFF;'">
				<!-- 
				isToShowï¼šè¿™ä¸ªå‚æ•°ç”¨äºæ§åˆ¶æ˜¾ç¤ºï¼Œä¸åŠ¨å®ƒå³å¯ 
				 -->
				<block v-if="isToShow">
					<!-- 14.è¡¨æƒ…é€‰æ‹©æ ï¼š
					 
					 æœ€è¿‘è¾“å…¥çš„ GIF å›¾åœ¨ï¼štimeEmoji
					 é»˜è®¤å±•ç¤ºçš„ è¡¨æƒ… ï¼šnowEmoji
					 è‡ªå·±ä¸Šä¼ çš„å›¾ç‰‡ï¼šlikeEmoji
					 GIF å›¾ç‰‡åº“ï¼šgifEmoji
					 
					 -->
					<!-- <scroll-view :style="'width: '+ Width +'px; height: 40px; background-color: #FFFFFF;'" :scroll-x="true" style="display: flex; flex-direction: row;" :show-scrollbar="false">
						<view :style="'display: flex; flex-direction: row; width: '+ Width +'px; padding-top: 10upx; padding-bottom: 10upx; border-bottom: 1upx solid #f3f1f4;'">
							<view :style="'width: 90upx; height: 60upx; border-radius: 60upx; position: absolute; background-color: #f8f4f7; margin-top: -8upx; margin-left: '+ (Width*0.04)*currentNum +'px;'"></view>
							<image @click="timeEmoji" src="../../static/douyin/time.png" style="width: 45upx; height: 45upx; margin-left: 50upx;"></image>
							<image @click="nowEmoji" src="../../static/douyin/biaoqing-2.png" style="width: 50upx; height: 50upx; margin-left: 50upx; margin-top: -5upx;"></image>
							<image @click="likeEmoji" src="../../static/douyin/xianxing.png" style="width: 55upx; height: 55upx; margin-left: 50upx; margin-top: -5upx;"></image>
							<view @click="gifEmoji" style="width: 45upx; height: 45upx; border-radius: 55upx; border: 2px solid #303133; margin-left: 52upx; margin-top: 0upx;">
								<image src="../../static/douyin/gif-2.png" style="width: 35upx; height: 35upx;"></image>
							</view>
						</view>
					</scroll-view> -->
					<!-- 15.è¡¨æƒ…é€‰æ‹©æ ï¼š
					 
					 æœ€è¿‘è¾“å…¥çš„ GIF å›¾åœ¨ï¼štimeEmoji
					 é»˜è®¤å±•ç¤ºçš„ è¡¨æƒ… ï¼šnowEmoji
					 è‡ªå·±ä¸Šä¼ çš„å›¾ç‰‡ï¼šlikeEmoji
					 GIF å›¾ç‰‡åº“ï¼šgifEmoji
					 
					 -->
					<swiper
						:style="'width: '+ Width +'px; height: '+ (emojiHeight-40) +'px; background-color: #FFFFFF;'"
						:current="current" @change="currentChange">
						<swiper-item>
							<scroll-view
								:style="'width: '+ Width +'px; height: '+ (emojiHeight-40) +'px; background-color: #FFFFFF;'"
								:scroll-y="true">
								<text v-if="nowImage.length !== 0" @click="qingkonGIF"
									style="font-size: 12px; margin-top: 20upx; position: absolute; right: 40upx; color: #007AFF;">æ¸…ç©º</text>
								<view style="display: flex; flex-direction: row; flex-wrap: wrap; margin-top: 40upx;">
									<block v-for="(list,index) in nowImage">
										<image @click="clicknowImage(index)" :src="list" mode="aspectFill"
											style="width: 120upx; height: 120upx; margin-top: 40upx; margin-left: 55upx;">
										</image>
										<!-- <image @click="deletenowImage(index)" src="../../static/douyin/zfxsc.png" style="width: 30upx; height: 30upx; position: absolute; right: 0; margin-top: 40upx;"></image> -->
									</block>
									<block v-if="nowImage.length == 0">
										<text
											:style="'font-size: 14px; color: #999999; margin-top: 200upx; margin-left: '+ (Width/3.2) +'px;'">ï½
											æ‚¨è¿˜æ²¡ä½¿ç”¨è¿‡å›¾ç‰‡ ï½</text>
									</block>
								</view>
								<view :style="'width: '+ Width +'px; height: 80px;'"></view>
							</scroll-view>
						</swiper-item>
						<swiper-item>
							<scroll-view
								:style="'width: '+ Width +'px; height: '+ (emojiHeight-40) +'px; background-color: #FFFFFF;'"
								:scroll-y="true">
								<block v-if="nowTimeEmojiList.length !== 0">
									<text style="font-size: 12px; margin-top: 20upx; margin-left: 30upx;">æœ€è¿‘ä½¿ç”¨</text>
									<text @click="qingkon"
										style="font-size: 12px; margin-top: 20upx; position: absolute; right: 40upx; color: #007AFF;">æ¸…ç©º</text>
									<view
										style="display: flex; flex-direction: row; flex-wrap: wrap; margin-bottom: 20upx;">
										<!-- QQ - è¡¨æƒ…åŒ… -->
										<block v-for="(list,index) in nowTimeEmojiList">
											<image @click="clicknowTimeEmoji(index)"
												:src="'../../static/emojis/qq/'+list.url+''"
												style="width: 35px; height: 35px; margin-top: 30upx; margin-left: 36upx;">
											</image>
										</block>
										<!-- æ–°æµªå¾®åš - è¡¨æƒ…åŒ… -->
										<!-- <block v-for="(list,index) in sinaEmojilist">
											<image @click="clicksinaEmoji(index)" :src="list.url" style="width: 35px; height: 35px; margin-top: 30upx; margin-left: 36upx;"></image>
										</block> -->
									</view>
								</block>
								<text style="font-size: 12px; margin-top: 20upx; margin-left: 30upx;">å…¨éƒ¨è¡¨æƒ…</text>
								<view style="display: flex; flex-direction: row; flex-wrap: wrap;">
									<!-- QQ - è¡¨æƒ…åŒ… -->
									<block v-for="(list,index) in emojilist">
										<image @click="clickEmoji(index)" :src="'../../static/emojis/qq/'+list.url+''"
											style="width: 35px; height: 35px; margin-top: 30upx; margin-left: 36upx;">
										</image>
									</block>
									<!-- æ–°æµªå¾®åš - è¡¨æƒ…åŒ… -->
									<!-- <block v-for="(list,index) in sinaEmojilist">
										<image @click="clicksinaEmoji(index)" :src="list.url" style="width: 35px; height: 35px; margin-top: 30upx; margin-left: 36upx;"></image>
									</block> -->
								</view>
								<view :style="'width: '+ Width +'px; height: 80px;'"></view>
							</scroll-view>
							<view v-if="platform=='ios'"
								style="position: absolute; display: flex; flex-direction: row; bottom: 0; right: 0; width: 300upx; height: 160upx; background-color: #FFFFFF; box-shadow: -20px -40px 20px 60upx #FFFFFF; border-radius: 2upx;">
								<view @click="undo"
									style="width: 130upx; height: 60upx; margin-top: 20upx; border-radius: 40upx; border: 1upx solid #c6c5c8;">
									<!-- 			<image src="../../static/douyin/shanchu-3.png" style="width: 45upx; height: 30upx; margin-top: 15upx; margin-left: 40upx;"></image> -->
								</view>
								<!-- 16.å‘é€æŒ‰é’®
								 
								 ç¬¦åˆï¼šæœ‰å†…å®¹ã€æˆ–è€…æ˜¯è¾“å…¥ GIF å›¾ç‰‡éƒ½å¯ä»¥é€šè¿‡
								 
								 -->
								<view v-if="(value!=='' || imageURL !== '') && isSend" @click="sendSMS"
									style="width: 130upx; height: 60upx; margin-top: 20upx; margin-left: 20upx; border-radius: 40upx; background-color: #ff1a63;">
									<text
										style="font-size: 14px; font-weight: bold; text-align: center; color: #FFFFFF; padding-top: 10upx;">å‘é€</text>
								</view>
								<view v-if="(value == '' && imageURL == '') && isSend"
									style="width: 130upx; height: 60upx; margin-top: 20upx; margin-left: 20upx; border-radius: 40upx; background-color: #bab9bb;">
									<text
										style="font-size: 14px; font-weight: bold; text-align: center; color: #FFFFFF; padding-top: 10upx;">å‘é€</text>
								</view>
							</view>
							<view v-if="platform!=='ios'"
								style="position: absolute; display: flex; flex-direction: row; bottom: 20upx; right: 20upx; width: 300upx; height: 80upx; padding: 10upx; background-color: #eceef1; border-radius: 20upx;">
								<view @click="undo"
									style="width: 130upx; height: 60upx; margin-top: 0; border-radius: 40upx; border: 1upx solid #c6c5c8;">
									<image src="../../static/douyin/shanchu-3.png"
										style="width: 45upx; height: 30upx; margin-top: 15upx; margin-left: 40upx;">
									</image>
								</view>
								<!-- 16.å‘é€æŒ‰é’®
								 
								 ç¬¦åˆï¼šæœ‰å†…å®¹ã€æˆ–è€…æ˜¯è¾“å…¥ GIF å›¾ç‰‡éƒ½å¯ä»¥é€šè¿‡
								 
								 -->
								<view v-if="(value!=='' || imageURL !== '') && isSend" @click="sendSMS"
									style="width: 130upx; height: 60upx; margin-top: 0; margin-left: 20upx; border-radius: 40upx; background-color: #ff1a63;">
									<text
										style="font-size: 14px; font-weight: bold; text-align: center; color: #FFFFFF; padding-top: 10upx;">å‘é€</text>
								</view>
								<view v-if="(value == '' && imageURL == '') && isSend"
									style="width: 130upx; height: 60upx; margin-top: 0; margin-left: 20upx; border-radius: 40upx; background-color: #bab9bb;">
									<text
										style="font-size: 14px; font-weight: bold; text-align: center; color: #FFFFFF; padding-top: 10upx;">å‘é€</text>
								</view>
							</view>
						</swiper-item>
						<swiper-item>
							<scroll-view
								:style="'width: '+ Width +'px; height: '+ (emojiHeight-40) +'px; background-color: #FFFFFF;'"
								:scroll-y="true">
								<view style="display: flex; flex-direction: row; flex-wrap: wrap;">
									<view v-if="platform=='ios'" @click="addlikeImage"
										style="width: 120upx; height: 120upx; border-radius: 10upx; border: 1upx dashed #000000; margin-top: 40upx; margin-left: 55upx;">
										<!-- 	<image src="../../static/douyin/jia-9.png" style="width: 50upx; height: 50upx; margin-top: 35upx; margin-left: 35upx;"></image> -->
									</view>
									<view v-if="platform!=='ios'" @click="addlikeImage"
										style="width: 120upx; height: 120upx; border-radius: 10upx; border: 1px solid #000000; margin-top: 40upx; margin-left: 55upx;">
										<!-- 					<image src="../../static/douyin/jia-9.png" style="width: 50upx; height: 50upx; margin-top: 35upx; margin-left: 35upx;"></image> -->
									</view>
									<block v-for="(list,index) in likeImage">
										<image @click="clickLikeImage(index)" :src="list" mode="aspectFill"
											style="width: 120upx; height: 120upx; margin-top: 40upx; margin-left: 55upx;">
										</image>
										<!-- 	<image @click="deleteImage(index)" src="../../static/douyin/zfxsc.png" style="width: 30upx; height: 30upx; position: absolute; right: 0; margin-top: 40upx;"></image> -->
									</block>
								</view>
								<view :style="'width: '+ Width +'px; height: 80px;'"></view>
							</scroll-view>
						</swiper-item>
						<swiper-item>
							<scroll-view
								:style="'width: '+ Width +'px; height: '+ (emojiHeight-40) +'px; background-color: #FFFFFF;'"
								:scroll-y="true" @scrolltolower="scrolltolowerGIF">
								<view style="display: flex; flex-direction: row; flex-wrap: wrap;">
									<view v-if="platform=='ios'" @click="searchGIF"
										style="width: 120upx; height: 120upx; border-radius: 10upx; border: 1upx dashed #000000; margin-top: 40upx; margin-left: 55upx;">
										<!-- 			<image src="../../static/douyin/sousuo-7.png" style="width: 50upx; height: 50upx; margin-top: 35upx; margin-left: 35upx;"></image> -->
									</view>
									<view v-if="platform!=='ios'" @click="searchGIF"
										style="width: 120upx; height: 120upx; border-radius: 10upx; border: 1px solid #000000; margin-top: 40upx; margin-left: 55upx;">
										<!-- 	<image src="../../static/douyin/sousuo-7.png" style="width: 50upx; height: 50upx; margin-top: 35upx; margin-left: 35upx;"></image> -->
									</view>
									<block v-for="(list,index) in gifAndpnglist">
										<image @click="clickGIF(index)" :src="list.url" mode="aspectFill"
											style="width: 120upx; height: 120upx; margin-top: 40upx; margin-left: 55upx;">
										</image>
									</block>
								</view>
								<view :style="'width: '+ Width +'px; height: 80px;'"></view>
							</scroll-view>
						</swiper-item>
					</swiper>
				</block>
				<block v-if="!isToShow">
					<!-- è¿™é‡Œä¸ºç©ºå³å¯ï¼Œä¸åŠ ä»»ä½•ä¸œè¥¿ -->
				</block>
			</view>
		</uni-popup>
		<!-- 1.
		 
		 è¿™ä¸ªå¼¹çª—ç”¨äºæœç´¢ GIF
		 
		 -->
		<uni-popup type="bottom" ref="searchEmoji" @touchmove.stop.prevent="movesearch" @change="searchGIFChange">
			<view v-if="searchGIFValue !== ''"
				:style="'width: '+ Width +'px; height: 80px; border-bottom: 1upx solid #e3e1e5; background-color: #FFFFFF; border-top-left-radius: 20upx; border-top-right-radius: 20upx;'">
				<!-- 2.
				 
				 æœå‡ºæ¥çš„ GIF éƒ½åœ¨è¿™é‡Œ
				 
				 -->
				<scroll-view
					:style="'width: '+ Width +'px; height: 80px; border-bottom: 1upx solid #e3e1e5; display: flex; flex-direction: row;'"
					:scroll-x="true" style="display: flex; flex-direction: row;" :show-scrollbar="false">
					<block v-for="(list,index) in GifList">
						<image @click="selectGIF(index)" :src="list.url" mode="aspectFill"
							style="width: 120upx; height: 120upx; margin-top: 20upx; margin-left: 20upx;"></image>
					</block>
					<view style="width: 20upx; height: 120upx; margin-left: 10upx;"></view>
				</scroll-view>
			</view>
			<!-- 3.
			 åŠ¨æ€å›¾è¾“å…¥æ¡†
			 -->
			<view :style="'width: '+ Width +'px; background-color: #FFFFFF; display: flex; flex-direction: row;'">
				<view
					:style="'width: '+ (Width-30) +'px; margin-left: 15px; margin-top: 20upx; background-color: #FFFFFF; margin-bottom: 20upx; display: flex; flex-direction: row;'">
					<input
						:style="'width: '+ (Width*0.8) +'px; height: 20px; margin-bottom: 20upx; font-size: 15px; color: #000000; margin-top: 15upx; margin-left: 30upx;'"
						placeholder="æœç´¢è¡¨æƒ…åŒ…" v-model="searchGIFValue" :auto-focus="false" :adjust-position="false"
						@blur="blurGIF" />
					<!-- 		<image v-if="searchGIFValue !== ''" @click="clearSearchValue" src="../../static/douyin/chacha-4.png" style=" width: 25upx; height: 25upx; margin-top: 20upx; margin-left: 30upx;"></image> -->
				</view>
			</view>
			<view v-if="platform=='ios'"
				:style="'width: '+ Width +'px; height: '+ (emojiHeight+40) +'px; background-color: #FFFFFF;'">
				<!-- è¿™é‡Œä¸è¦åŠ¨å°±è¡Œ -->
			</view>
			<view v-if="platform!=='ios'"
				:style="'width: '+ Width +'px; height: '+ emojiHeight +'px; background-color: #FFFFFF;'">
				<!-- è¿™é‡Œä¸è¦åŠ¨å°±è¡Œ -->
			</view>
		</uni-popup>
	</view>
</template>

<script>
	// 1.å…ˆå¼•å…¥è¡¨æƒ…åº“ï¼Œï¼ˆå®Œå…¨æ‰‹æ’¸ï¼Œååˆ†ç¹çï¼‰ï¼ˆè¿™ä¸ªæ˜¯ QQ çš„è¡¨æƒ…åº“ï¼‰
	// import emojiList from '../../common/emoji/biaoqin.js'
	// 2.è¿™ä¸ªè¡¨æƒ…åº“æ˜¯æ–°æµªå¾®åš çš„è¡¨æƒ…åº“
	// import sinaEmojiList from '../../common/emoji/sina.js'
	// 3.è¿™ä¸ªä¸€å®šè¦å¼•å…¥è¿›æ¥ï¼Œç”¨æ¥è§£æç”Ÿæˆçš„ <html>ã€ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸã€‘ååˆ†é‡è¦ã€è¿™é‡Œå·²ç»å¯¹åŸæ¥çš„æ–‡ä»¶è¿›è¡Œäº†æ”¹ç¼–ã€‘
	import parsehtml from '../../common/html-parse/parse_html.js'
	// 4.è¿™é‡Œå¼•å…¥æ—¶é—´å‡½æ•° ç”¨æ¥ä¸Šä¼ æ—¶ç”¨çš„
	import time from '../../common/time-utils/currentData.js'
	import {
		HTTP_REQUEST_URL
	} from '@/config/app';
	import {
		commentList,
		markeComment,
		replyCommentList,
		replyCommentLike
	} from '@/api/short-video.js';
	import {
		mapGetters
	} from 'vuex';
	export default {
		name: "douyin-scrollview",
		props: {
			Width: {
				type: Number,
				default: 0
			},
			Height: {
				type: Number,
				default: 0
			},
			deleteIOSHeight: {
				type: Number,
				default: 0
			},
			deleteAndroidHeight: {
				type: Number,
				default: 0
			}
		},
		computed: mapGetters(['uid']),
		data() {
			return {
				videoID: 0,
				pinlunNum: 0,
				// æ¯ä¸€ä¸ªå‚æ•°éƒ½é‡è¦
				// è§£é‡Šå¦‚ä¸‹ï¼š
				// ----- start ----- è¯„è®ºè¾“å…¥æ¡†éƒ¨åˆ†
				num: 1.15, //ç”¨æ¥å¤„ç†è¯„è®ºçš„é«˜åº¦
				plHeight: 0, //è¯„è®ºé«˜åº¦
				value: "", //ç”¨æˆ·åœ¨è¾“å…¥æ¡†è¾“å…¥ä¿¡æ¯çš„æ•°æ®
				autoHeight: false, //è¿™ä¸ªé»˜è®¤å³å¯ï¼ˆç”¨äºè¯„è®ºæ¡†è‡ªåŠ¨é€‚åº”é«˜åº¦ï¼‰
				borderRadius: 100, //è¯„è®ºæ¡†åœ†è§’å¤§å°
				lineheight: 0, //é»˜è®¤å³å¯ï¼ˆç”¨äºå¤„ç†è¯„è®ºæ¡†é«˜åº¦ï¼‰
				percent: 1, //é»˜è®¤ï¼ˆç”¨äºå¤„ç†å‘é€æŒ‰é’®å·²ç»è¯„è®ºæ¡†å®½åº¦ï¼‰
				show: true, //é»˜è®¤ï¼ˆæ˜¯å¦æ˜¾ç¤ºè¯„è®ºæ¡†ï¼‰
				emojiHeight: 0, //è¡¨æƒ…åŒºåŸŸçš„é«˜åº¦
				emojiheight: 0, //ç”¨äºå¤„ç†è¡¨æƒ…åŒºåŸŸçš„é«˜åº¦
				cursorSpacing: 20, //é”®ç›˜è·ç¦»è¾“å…¥æ¡†çš„è·ç¦»
				autoFocus: true, //æ˜¯å¦è‡ªåŠ¨èšç„¦ï¼ˆé»˜è®¤èšç„¦ï¼‰
				isopen: false, //(é»˜è®¤ä¸å±•å¼€)
				isToShow: false, //é»˜è®¤
				adjustPosition: false, //é»˜è®¤
				placeholder: "è¯´ç‚¹ä»€ä¹ˆå‘—~",

				// 
				current: 1, //å½“å‰åˆ‡æ¢çš„ä½ç½®
				emojilist: [], //è¡¨æƒ…æ•°ç»„
				nowTimeEmojiList: [], //æœ€è¿‘è¾“å…¥çš„è¡¨æƒ…
				sinaEmojilist: [], //æ–°æµªå¾®åšè¡¨æƒ…
				currentNum: 4.4, //é»˜è®¤
				likeImage: [], //é»˜è®¤
				nowImage: [], //é»˜è®¤

				gifAndpngList: [], //é»˜è®¤
				gifAndpnglist: [], //é»˜è®¤

				searchGIFValue: "", //é»˜è®¤
				isSearcopen: false, //é»˜è®¤
				GifList: [], //é»˜è®¤
				isShowImage: false, //é»˜è®¤
				imageURL: "", //é»˜è®¤

				platform: "", //é»˜è®¤
				systemVerson: "", //ç³»ç»Ÿç‰ˆæœ¬
				ischangepinlun: true, //é»˜è®¤æ˜¾ç¤ºå…¨é¢å±æ‰‹æœºè¯„è®ºæ ·å¼

				// ----- end ----- è¯„è®ºè¾“å…¥æ¡†éƒ¨åˆ†

				// ----- start ----- è¯„è®ºå†…å®¹éƒ¨åˆ†
				pinlunList: [], //ç”¨äºåœ¨ç•Œé¢å±•ç¤ºçš„ è¯„è®ºæ•°ç»„
				pinlunListX: [], //è¿™ä¸ªæ˜¯ç”¨æ¥å­˜å‚¨åŸå§‹è¯„è®ºæ•°æ®çš„æ•°ç»„
				pinlun_list: [], //ç”¨äºå­˜å‚¨ç•Œé¢ è¯„è®ºæ•°ç»„ çš„å‰¯æœ¬
				isSend: true, //é»˜è®¤
				userID: "", //å½“å‰ç”¨æˆ·çš„ ID
				videouserID: "", //å½“å‰è§†é¢‘ä½œè€…çš„ ID
				update: true, //ç”¨äºåˆ·æ–°è§†å›¾

				huifuUser: "", //å›å¤ä¿¡æ¯çš„äººçš„åå­—
				gethuifuUser: "", //è¢«å›å¤çš„äººï¼ˆä¹Ÿå°±æ˜¯æ¥æ”¶è€…çš„åå­—ï¼‰
				gethuifuUserID: "", //è¢«å›å¤çš„äººçš„ ID
				istohuifu: false, //æ˜¯å¦æ˜¯å»å›å¤ï¼ˆé»˜è®¤ä¸æ˜¯ï¼‰
				huifuindex: -1, //å›å¤ä¿¡æ¯æ‰€åœ¨ä¸‹æ ‡
				iszhangkai: false, //é»˜è®¤ä¸å±•å¼€è¯„è®º
				imgHost: HTTP_REQUEST_URL,
				// ----- end ----- è¯„è®ºå†…å®¹éƒ¨åˆ†
				limit: 10,
				page: 1,
				pages: 1,
				parentNum: 0
			};
		},
		watch: {
			// ç›‘å¬ è¾“å…¥è¡¨æƒ…å€¼ å¹¶æœç´¢ GIF è¡¨æƒ…
			searchGIFValue(val) {
				this.isopen = false;
				if (val !== '') {
					var sms = []
					for (let i = 0; i < this.gifAndpngList.length; i++) {
						if (this.gifAndpngList[i].name.indexOf(val) !== -1) {
							sms.push(this.gifAndpngList[i]);
						}
					}
					this.GifList = sms;
				}
			},
			// ç›‘å¬ è¾“å…¥æ¡†è¾“å…¥æ•°æ®
			value(val) {
				if (val == "") {
					this.autoHeight = false
					if (this.imageURL !== '') {
						this.percent = 0.9
					} else {
						this.percent = 1
					}
				} else {
					this.autoHeight = true
					this.percent = 0.9
				}
			},
			// ç›‘å¬ GIFå›¾ç‰‡ï¼ˆç”¨æˆ·é€‰æ‹©ä¸€ä¸ª GIF å›¾ç‰‡ä»¥åè¿™ä¸ªå€¼å°±ä¼šè¢«èµ‹å€¼ï¼‰
			imageURL(val) {
				if (val !== '') {
					this.percent = 0.9
				} else {
					if (this.value == '') {
						this.percent = 1
					}
				}
			},
			// ç›‘å¬ è¾“å…¥æ¡† é«˜åº¦å˜åŒ–
			lineheight(newVal, oldVal) {
				if (Math.abs(newVal) < 30) {
					this.borderRadius = 100
				} else {
					this.borderRadius = 30
				}
			}
		},
		/*
		æ‰“å¼€ç»„ä»¶ä¹‹åå¼€å§‹æ‰§è¡Œä¸‹é¢æ–¹æ³•
		*/
		created() {
			// 1.isToShow ç”¨äºè¾“å…¥æ¡†æ˜¾ç¤ºï¼ˆé»˜è®¤ä¸æ”¹ï¼‰
			this.isToShow = false;
			// 2.åˆ¤æ–­å½“å‰è®¾å¤‡ä¿¡æ¯
			var model = uni.getSystemInfoSync().model;
			// 3.åˆ¤æ–­å½“å‰è®¾å¤‡ä¿¡æ¯
			this.platform = uni.getSystemInfoSync().platform;
			// 3.1 è·å–ç³»ç»Ÿç‰ˆæœ¬
			var systemVerson = uni.getSystemInfoSync().system
			if (systemVerson.split(' ')[0] == "Android") {
				if (systemVerson.split(' ')[1] < 9) {
					// ä½ç«¯å®‰å“æœº
					this.ischangepinlun = false //å°äºå®‰å“ 8
					this.windowHeight = uni.getSystemInfoSync().screenHeight;
					this.emojiHeight = this.windowHeight / 2.1 - this.deleteAndroidHeight;
				} else {
					// å…¨é¢å±å®‰å“æœº
					this.ischangepinlun = true //å…¨é¢å±
					this.windowHeight = uni.getSystemInfoSync().screenHeight;
					this.emojiHeight = this.windowHeight / 2.6 - this.deleteAndroidHeight;
				}
			} else {
				if (uni.getSystemInfoSync().platform == 'ios' && (model !== 'iPhone6' || model !== 'iPhone6s' || model !==
						'iPhone7' || model !== 'iPhone8')) {
					// å…¨é¢å±iPhone
					this.ischangepinlun = true //å…¨é¢å±
					this.windowHeight = uni.getSystemInfoSync().screenHeight;
					this.emojiHeight = this.windowHeight / 2.2 - this.deleteIOSHeight;
				} else {
					// éå…¨é¢å±iPhone
					this.ischangepinlun = false
					this.windowHeight = uni.getSystemInfoSync().screenHeight;
					this.emojiHeight = this.windowHeight / 2.1 - this.deleteIOSHeight;
				}
			}
			// 4.è·å–å½“å‰ è§†é¢‘ ID
			this.videoID = uni.getStorageSync("videoID");
			//4.1è·å–å½“å‰ è§†é¢‘ æ•°é‡
			this.pinlunNum = uni.getStorageSync("pinlunNum");
			// 5.è·å–å½“å‰ ç”¨æˆ· ID
			this.userID = uni.getStorageSync("user")._id;
			// 6.è·å–è¯„è®ºä¿¡æ¯
			this.getnewpinlun();
			// 7.æ ¹æ®è®¾å¤‡ä¿¡æ¯ï¼Œå¤„ç†è¯„è®ºåŒºåŸŸé«˜åº¦
			if (uni.getSystemInfoSync().platform == 'ios' && (model !== 'iPhone6' || model !== 'iPhone6s' || model !==
					'iPhone7' || model !== 'iPhone8')) {
				this.num = 1.25
			} else {
				this.num = 1.15
			}
			if (uni.getSystemInfoSync().platform == 'ios') {
				this.adjustPosition = true
			} else {
				this.adjustPosition = false
			}
			this.plHeight = this.Height - (this.Height / this.num);
			console.log(this.plHeight);
			// 8.èšç„¦è¾“å…¥
			this.focus();
			// 9.åˆ¤æ–­æ˜¯å¦æœ‰ GIF å›¾ç‰‡
			if (this.imageURL !== '') {
				this.percent = 0.9
			}
			// 10.æŠŠä¹‹å‰å‡†å¤‡å¥½çš„ emoji è¡¨æƒ…èµ‹å€¼ç»™ æ•°ç»„ï¼Œç”¨äºå±•ç¤º
			// this.emojilist = emojiList
			// this.sinaEmojilist = sinaEmojiList
			// 11.çœ‹çœ‹æœ‰æ²¡æœ‰å–œæ¬¢çš„ GIFï¼Œæœ‰çš„è¯èµ‹å€¼
			this.likeImage = uni.getStorageSync("likeImage");
			// 11.çœ‹çœ‹æœ‰æ²¡æœ‰å½“å‰çš„ GIFï¼Œæœ‰çš„è¯èµ‹å€¼
			this.nowImage = uni.getStorageSync("nowImage");
			// 11.çœ‹çœ‹æœ‰æ²¡æœ‰å½“å‰çš„ emoji ï¼Œæœ‰çš„è¯èµ‹å€¼
			this.nowTimeEmojiList = uni.getStorageSync("nowTimeEmojiList");
			// 12.è¯·æ±‚ GIF è¡¨æƒ…åº“ï¼ˆè¿™é‡Œçš„è¡¨æƒ…åº“éƒ½å­˜åœ¨ json æ–‡ä»¶é‡Œé¢äº†ï¼‰
			/*
			1.èµ„æºæ¥æº
			
			GitHubï¼šhttps://github.com/zhaoolee/ChineseBQB
			Giteeï¼šhttps://gitee.com/mirrors/ChineseBQB
			
			è¿™ä¸¤ä¸ªåº“ æ•°æ®éƒ½æ˜¯åŒæ­¥çš„ï¼Œå¯ä»¥å»å‚è€ƒï¼Œå›½å†…çš„è¯å¯ä»¥ç”¨ gitee è®¿é—®ä¸‹è½½ï¼Œå¦‚ä½•ä¸¢åˆ°æœåŠ¡å™¨é‡Œé¢
			
			*/
			// uni.request({
			// 	url: 'https://vkceyugu.cdn.bspapp.com/VKCEYUGU-bdb24c6d-8c19-4f80-8e7e-c9c9f037f131/bf6f0d2e-e065-4685-a104-218c42add104.json',
			// 	success: (res) => {
			// 		var gifAndpngList = res.data.data
			// 		var sms = []
			// 		for(let i=0;i<gifAndpngList.length;i++){
			// 			/*
			// 			å®ƒçš„èµ„æºå¾ˆå¤šï¼Œè¿™é‡Œåªè·å– gif éƒ¨åˆ†
			// 			*/
			// 			if(gifAndpngList[i].name.indexOf("gif") !== -1){
			// 				sms.push(gifAndpngList[i])
			// 			}
			// 		}
			// 		this.gifAndpngList = sms
			// 	}
			// })
		},
		methods: {
			/*
			
			---- ç¬¬ä¸€æ®µï¼Œè¿™é‡Œé¢å«æœ‰ http åå°çœŸå®è¯·æ±‚ï¼Œä»¥åŠè¿”å›å¤„ç†çš„æ“ä½œä»¥åŠæ•°æ®
			
			ã€ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸã€‘
			
			---- start ----
			
			*/
			getnewpinlun() {
				// è¿™é‡Œæ˜¯å¯¹è¯„è®ºä¿¡æ¯åšå¤„ç†
				commentList(this.videoID, {
					limit: 10,
					page: this.pages
				}).then(res => {
					this.pages = this.pages + 1
					this.pinlunList = this.pinlunList.concat(res.data);
				}).catch(err => {
					return uni.showToast({
						title: err,
						icon: 'none',
						duration: 2000
					});
				})
			},
			sendSMS() {
				this.isSend = false;
				uni.showLoading({
					title: 'æ­£åœ¨å‘é€...'
				})
				let pid = this.parentNum ? 0 : this.pinlunList[this.huifuindex].id;
				let data = {
					id: this.videoID,
					pid: pid,
					content: this.value
				}
				markeComment(data).then(res => {
					uni.hideLoading();
					this.pinlunNum = this.pinlunNum + 1;
					this.$emit('pinlunFun', this.pinlunNum)
					this.value = "";
					this.imageURL = "";
					this.$refs.openPinglun.close();
					this.isSend = true;
					this.pages = 1;
					this.pinlunList = [];
					this.getnewpinlun();
				}).catch(err => {
					return uni.showToast({
						title: err,
						icon: 'none',
						duration: 2000
					});
				});
			},
			loadmore() {
				this.getnewpinlun();
			},
			scrolls() {},
			tolike(item, index) {
				// å¤„ç†è¯„è®º
				replyCommentLike('like', item.id).then(res => {
					this.pinlunList[index].is_like = !this.pinlunList[index].is_like
					const video = this.pinlunList[index];
					item.is_like ? video.like_num += 1 : video.like_num -= 1;
				}).catch(err => {
					return uni.showToast({
						title: err,
						icon: 'none',
						duration: 2000
					});
				})
			},
			tosonlike(index, inde, item) {
				replyCommentLike('like', item.id).then(res => {
					this.pinlunList[index].reply[inde].is_like = !this.pinlunList[index].reply[inde].is_like
					const video = this.pinlunList[index].reply[inde];
					item.is_like ? video.like_num += 1 : video.like_num -= 1;
				}).catch(err => {
					return uni.showToast({
						title: err,
						icon: 'none',
						duration: 2000
					});
				})
			},
			zhangkai(index, item) {
				// 1.ç‚¹å‡»å±•å¼€è¯„è®ºï¼Œä¸€å¼€å§‹æ˜¯ä¸å±•å¼€çš„ï¼ˆå¦‚æœç‚¹å‡»å±•å¼€ï¼Œå°±æŠŠ è¯„è®ºçš„å‰¯æœ¬çš„å­è¯„è®ºèµ‹å€¼ç»™å½“å‰é¡µé¢é¡µé¢è¯„è®ºï¼Œè¿™æ ·å½“å‰é¡µé¢å°±å¯ä»¥æ˜¾ç¤ºå­è¯„è®ºäº†ï¼‰
				if (item.isShow == undefined || item.isShow == 'undefined') {
					this.page = 1;
				}
				replyCommentList(item.id, {
					limit: this.limit,
					page: this.page
				}).then(res => {
					this.page = this.page + 1;
					item.reply = item.reply.concat(res.data);
					if (item.reply.length) {
						item.isShow = true;
					}
					this.$set(this, 'pinlunList', this.pinlunList);
				}).catch(err => {
					return uni.showToast({
						title: err,
						icon: 'none',
						duration: 2000
					});
				})
			},
			shouqi(item) {
				this.page = 1
				item.reply = [];
				item.isShow = false;
				this.$set(this, 'pinlunList', this.pinlunList);
			},
			deletesonpinlun(index, inde) {},
			// deletepinlun(index){
			// 	// åˆ é™¤ è¯„è®ºï¼ˆå­è¯„è®ºä¹Ÿå°†è¢«åˆ é™¤ï¼‰
			// 	uni.showModal({
			// 		title: 'ç¡®å®šåˆ é™¤ï¼Ÿ',
			// 		content: 'åˆ é™¤åå­è¯„è®ºå°†è¢«åˆ é™¤',
			// 		success: (re) => {
			// 			if(re.confirm){
			// 				uni.showLoading({
			// 					title: "æ­£åœ¨åˆ é™¤"
			// 				})
			// 				var sms = []
			// 				for(let i=0;i<this.pinlunListX.length;i++){
			// 					if(i !== ((this.pinlunListX.length-1)-index)){
			// 						sms.push(this.pinlunListX[i]);
			// 					}
			// 				}
			// 				// console.log(this.pinlunListX)
			// 				uni.request({
			// 					url: 'https://bdb24c6d-8c19-4f80-8e7e-c9c9f037f131.bspapp.com/video',
			// 					method: 'POST',
			// 					data:{
			// 						info: 'add_pinlun',
			// 						_id: this.videoID,
			// 						pinlun: sms
			// 					},
			// 					success: (resx) => {
			// 						uni.hideLoading();
			// 						this.getnewpinlun();
			// 					}
			// 				})
			// 			}
			// 		}
			// 	})
			// },
			addlikeImage() {
				uni.showModal({
					title: 'â°æ¼”ç¤ºé¡¹ç›®æé†’â°',
					content: 'è¯·å‰å¾€ douyin-scrollview.nvueç»„ä»¶\naddlikeImage()å‡½æ•°è¿›è¡Œé…ç½®',
					success: () => {}
				})
			},

			/*
			ã€ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸã€‘
			
			----- end -----
			*/

			sonhuifu(index, inde) {
				// 1.å­è¯„è®ºå›å¤
				/*
				ï¼ˆ1ï¼‰å…ˆå¤„ç†å›å¤äººä¿¡æ¯
				ï¼ˆ2ï¼‰å¤„ç†è¢«å›å¤äººä¿¡æ¯
				ï¼ˆ3ï¼‰æ”¹å˜ â€œå‘é€â€ çŠ¶æ€
				ï¼ˆ4ï¼‰æ‰“å¼€è¯„è®ºæ¡†
				*/
				this.huifuUser = uni.getStorageSync("user").username;
				this.gethuifuUser = this.pinlunList[index].sonPinlun[inde].username;
				this.gethuifuUserID = this.pinlunList[index].sonPinlun[inde].userID;
				this.istohuifu = true;
				this.placeholder = "å›å¤ï¼š" + this.gethuifuUser;
				this.huifuindex = index;
				this.openPinglun();
			},
			huifu(index) {
				// 1.è¯„è®ºå›å¤
				/*
				ï¼ˆ1ï¼‰å…ˆå¤„ç†å›å¤äººä¿¡æ¯
				ï¼ˆ2ï¼‰å¤„ç†è¢«å›å¤äººä¿¡æ¯
				ï¼ˆ3ï¼‰æ”¹å˜ â€œå‘é€â€ çŠ¶æ€
				ï¼ˆ4ï¼‰æ‰“å¼€è¯„è®ºæ¡†
				*/
				this.parentNum = 0;
				this.placeholder = "å›å¤ï¼š" + this.pinlunList[index].nickname;
				this.huifuindex = index;
				this.openPinglun();
			},
			clicknowImage(index) {
				// ç‚¹å‡» GIF å›¾ç‰‡ä¿¡æ¯
				this.imageURL = this.nowImage[index];
				this.isShowImage = true;
			},
			selectGIF(index) {
				// é€‰æ‹© GIF å›¾ç‰‡
				/*
				ï¼ˆ1ï¼‰è·å– GIF é“¾æ¥
				ï¼ˆ2ï¼‰æ¸…ç†æœç´¢çš„ GIF è¾“å…¥æ¡†ä¿¡æ¯
				ï¼ˆ3ï¼‰ç¼“å­˜ GIF å›¾ç‰‡ä¿¡æ¯
				*/
				this.imageURL = this.GifList[index].url;
				this.isShowImage = true;
				this.searchGIFValue = ""
				this.$refs.searchEmoji.close();
				if (uni.getStorageSync("nowImage").length == 0) {
					this.nowImage = []
					this.nowImage.push(this.imageURL)
					uni.setStorageSync("nowImage", this.nowImage);
				} else {
					this.nowImage = uni.getStorageSync("nowImage");
					let isTrue = true;
					for (let i = 0; i < this.nowImage.length; i++) {
						if (this.imageURL == this.nowImage[i]) {
							isTrue = false;
						}
					}
					if (isTrue) {
						this.nowImage.push(this.imageURL)
					}
					uni.setStorageSync("nowImage", this.nowImage);
				}
			},
			deleteimageURL() {
				// æ¸…ç† GIF å›¾ç‰‡
				this.imageURL = "";
				this.isShowImage = false;
			},
			clickGIF(index) {
				// åœ¨é€‰æ‹© GIF åˆ—è¡¨ï¼Œç‚¹å‡» GIF å›¾ç‰‡ï¼Œé€‰æ‹©å›¾ç‰‡
				/*
				ï¼ˆ1ï¼‰è·å– GIF é“¾æ¥
				ï¼ˆ2ï¼‰æ¸…ç†æœç´¢çš„ GIF è¾“å…¥æ¡†ä¿¡æ¯
				ï¼ˆ3ï¼‰ç¼“å­˜ GIF å›¾ç‰‡ä¿¡æ¯
				*/
				this.imageURL = this.gifAndpnglist[index].url;
				this.isShowImage = true;
				if (uni.getStorageSync("nowImage").length == 0) {
					this.nowImage = []
					this.nowImage.push(this.imageURL)
					uni.setStorageSync("nowImage", this.nowImage);
				} else {
					this.nowImage = uni.getStorageSync("nowImage");
					let isTrue = true;
					for (let i = 0; i < this.nowImage.length; i++) {
						if (this.imageURL == this.nowImage[i]) {
							isTrue = false;
						}
					}
					if (isTrue) {
						this.nowImage.push(this.imageURL)
					}
					uni.setStorageSync("nowImage", this.nowImage);
				}
			},
			clearSearchValue() {
				// ç‚¹å‡»æœç´¢ GIF çš„å°å‰å‰ï¼Œæ¸…ç†è¾“å…¥çš„å€¼
				this.searchGIFValue = ""
			},
			blurGIF() {
				// æœç´¢ GIF å›¾ç‰‡å¤±å»èšç„¦æ—¶
				// å…³é—­ GIF è¾“å…¥æ¡†
				if (this.searchGIFValue == '') {
					this.$refs.searchEmoji.close();
				}
			},
			searchGIF() {
				// ç‚¹å‡»æœç´¢ GIF å›¾ç‰‡
				// æ‰“å¼€è¾“å…¥æ¡†
				if (uni.getSystemInfoSync().platform == 'ios') {
					this.$refs.searchEmoji.open('bottom');
				} else {
					setTimeout(() => {
						this.$refs.searchEmoji.open('bottom');
					}, 500)
				}
			},
			deletenowImage(index) {
				// åˆ é™¤å½“å‰å›¾ç‰‡
				var sms = []
				for (let i = 0; i < this.nowImage.length; i++) {
					if (this.nowImage[i] !== this.nowImage[index]) {
						sms.push(this.nowImage[i])
					}
				}
				this.nowImage = sms;
				uni.setStorageSync("nowImage", this.nowImage);
			},
			clickLikeImage(index) {
				// ç‚¹å‡»å–œæ¬¢çš„å›¾ç‰‡ä¹‹å
				/*
				ï¼ˆ1ï¼‰è·å–å›¾ç‰‡ä¿¡æ¯
				ï¼ˆ2ï¼‰ç¼“å­˜å›¾ç‰‡ åœ¨æœ¬åœ°
				*/
				if (uni.getStorageSync("nowImage").length == 0) {
					this.nowImage = []
					this.nowImage.push(this.likeImage[index])
					uni.setStorageSync("nowImage", this.nowImage);
				} else {
					this.nowImage = uni.getStorageSync("nowImage");
					let isTrue = true;
					for (let i = 0; i < this.nowImage.length; i++) {
						if (this.likeImage[index] == this.nowImage[i]) {
							isTrue = false;
						}
					}
					if (isTrue) {
						this.nowImage.push(this.likeImage[index])
					}
					uni.setStorageSync("nowImage", this.nowImage);
				}
			},
			deleteImage(index) {
				// åˆ é™¤ å›¾ç‰‡
				/*
				ï¼ˆ1ï¼‰æ›´æ–°å½“å‰ GIF å›¾ç‰‡åˆ—è¡¨
				ï¼ˆ2ï¼‰åŒæ—¶å»çœ‹çœ‹ æœ€è¿‘ä½¿ç”¨å›¾ç‰‡é‡Œé¢æœ‰æ²¡æœ‰å½“å‰è¦åˆ é™¤çš„å›¾ç‰‡ï¼Œ
					å¦‚æœæœ‰çš„è¯å°±ä¸€åŒåˆ é™¤æ‰
				*/
				uni.showModal({
					title: 'ç¡®å®šåˆ é™¤ï¼Ÿ',
					success: (re) => {
						if (re.confirm) {
							uni.removeSavedFile({
								filePath: this.likeImage[index],
								success: () => {
									var sms = []
									for (let i = 0; i < this.likeImage.length; i++) {
										if (this.likeImage[i] !== this.likeImage[index]) {
											sms.push(this.likeImage[i])
										}
									}
									var smh = []
									for (let i = 0; i < this.nowImage.length; i++) {
										if (this.nowImage[i] !== this.likeImage[index]) {
											smh.push(this.nowImage[i])
										}
									}
									this.nowImage = smh;
									uni.setStorageSync("nowImage", this.nowImage);
									this.likeImage = sms;
									uni.setStorageSync("likeImage", this.likeImage);
								}
							});
						}
					}
				})
			},

			qingkonGIF() {
				// æ¸…ç©ºå½“å‰ GIF å›¾ç‰‡
				uni.showModal({
					title: 'ç¡®å®šæ¸…ç©ºï¼Ÿ',
					success: (re) => {
						if (re.confirm) {
							this.nowImage = []
							uni.removeStorageSync("nowImage");
						}
					}
				})
			},
			searchGIFChange(e) {

			},
			change(e) {
				// è¾“å…¥æ¡†å¼€å…³å˜åŒ–
				/*
				ï¼ˆ1ï¼‰å¦‚æœæ‰“å¼€è¾“å…¥æ¡†ï¼ˆshow == trueï¼‰
					- æ­¤æ—¶è¯·æ±‚ GIF åˆ—è¡¨å›¾ç‰‡ä¿¡æ¯
				ï¼ˆ2ï¼‰å¦‚æœå…³é—­è¾“å…¥æ¡†
					- æ¢å¤é»˜è®¤è®¾ç½®
				*/
				this.isToShow = false;
				if (e.show == true) {
					this.show = false;
					this.getGif();
				} else {
					uni.hideKeyboard();
					this.show = true
					this.autoFocus = true;
					this.isopen = false;
					this.current = 1;
					this.currentNum = 4.4;
					this.isShowImage = false;
					this.cursorSpacing = 20;
					this.placeholder = "è¯´ç‚¹ä»€ä¹ˆå‘—~";
					this.istohuifu = false;
				}
			},
			/*
			
			ä»¥ä¸‹æ–¹æ³•éƒ½æ˜¯è¾“å…¥æ¡† çŠ¶æ€å˜åŒ–ï¼Œä»¥åŠé€»è¾‘åˆ‡æ¢ç­‰ä¿¡æ¯
			
			è™½ç„¶ä¸èµ·çœ¼ä½†æ˜¯å¾ˆé‡è¦ ã€ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸã€‘
			
			ï¼ˆå¦‚æœæ˜¯è¦å¤åˆ¶çš„è¯éƒ½æ˜¯è¦å¤åˆ¶çš„ï¼‰
			
			*/
			// ------- start -------
			clickTextarea() {
				this.isopen = false;
				if (uni.getSystemInfoSync().platform == 'ios') {
					this.autoFocus = false;
					setTimeout(() => {
						this.autoFocus = true;
					}, 200)
				}
			},
			closeSheet() {
				this.$emit('closeScrollview');
			},
			movehandle() {},
			movesearch() {},
			parentPinglun() {
				this.parentNum = 1;
				this.openPinglun();
			},
			openPinglun() {
				this.$refs.openPinglun.open('bottom')
			},
			linechange(event) {
				this.lineheight = event.detail.height
			},
			keyboardheightchange() {},
			blur() {
				uni.hideKeyboard();
			},
			focus() {
				if (uni.getSystemInfoSync().platform == 'ios') {
					this.autoFocus = false;
					this.isopen = true;
				}
				setTimeout(() => {
					this.autoFocus = true;
					this.isopen = false;
					setTimeout(() => {
						if (uni.getSystemInfoSync().platform == 'ios') {
							this.isToShow = true;
						}
						if (this.imageURL !== '') {
							this.isShowImage = true;
						}
					}, 1500)
				}, 20)
			},
			toemoji() {
				if (this.isopen == false) {
					this.isopen = true;
					setTimeout(() => {
						this.isToShow = true;
					}, 500)
					uni.hideKeyboard();
				} else {
					if (uni.getSystemInfoSync().platform == 'ios') {
						this.isShowImage = false;
					} else {
						this.isToShow = false;
					}
					this.isopen = false;
					this.autoFocus = false;
					setTimeout(() => {
						this.autoFocus = true;
						if (this.imageURL !== '') {
							setTimeout(() => {
								this.isShowImage = true;
							}, 1300)
						}
					}, 20)
				}
			},
			undo() {
				if (this.value !== "") {
					var str = ""
					for (let i = 0; i < this.value.length - 1; i++) {
						str += this.value[i]
					}
					this.value = str;
				}
			},
			timeEmoji() {
				this.currentNum = 1
				this.current = 0
			},
			nowEmoji() {
				this.currentNum = 4.3
				this.current = 1
			},
			likeEmoji() {
				this.currentNum = 7.6
				this.current = 2
			},
			gifEmoji() {
				this.currentNum = 11.0
				this.current = 3
			},
			qingkon() {
				uni.showModal({
					title: 'ç¡®å®šæ¸…ç©ºï¼Ÿ',
					success: (re) => {
						if (re.confirm) {
							this.nowTimeEmojiList = []
							uni.removeStorageSync("nowTimeEmojiList");
						}
					}
				})
			},
			clicknowTimeEmoji(index) {
				var str = this.nowTimeEmojiList[index].alt;
				this.value += str;
			},
			clickEmoji(index) {
				// console.log(this.emojilist[index])
				var str = this.emojilist[index].alt;
				this.value += str;
				if (uni.getStorageSync("nowTimeEmojiList").length == 0) {
					this.nowTimeEmojiList = []
					this.nowTimeEmojiList.push(this.emojilist[index])
					uni.setStorageSync("nowTimeEmojiList", this.nowTimeEmojiList);
				} else {
					this.nowTimeEmojiList = uni.getStorageSync("nowTimeEmojiList");
					let isTrue = true;
					for (let i = 0; i < this.nowTimeEmojiList.length; i++) {
						if (this.emojilist[index].alt == this.nowTimeEmojiList[i].alt) {
							isTrue = false;
						}
					}
					if (isTrue) {
						this.nowTimeEmojiList.push(this.emojilist[index])
					}
					uni.setStorageSync("nowTimeEmojiList", this.nowTimeEmojiList);
				}
			},
			clicksinaEmoji(index) {
				console.log(this.sinaEmojilist[index])
			},
			currentChange(e) {
				var num = e.detail.current + 1
				switch (num) {
					case 1:
						this.currentNum = 1
						break;
					case 2:
						this.currentNum = 4.3
						break;
					case 3:
						this.currentNum = 7.6
						break;
					case 4:
						this.currentNum = 11.0
						break;
					default:
						break;
				}
			},
			getGif() {
				var list = []
				for (let i = 0; i < 15; i++) {
					var num = Math.round(Math.random() * this.gifAndpngList.length);
					list.push(this.gifAndpngList[num]);
				}
				this.gifAndpnglist = list
			},
			scrolltolowerGIF() {
				for (let i = 0; i < 15; i++) {
					var num = Math.round(Math.random() * this.gifAndpngList.length);
					this.gifAndpnglist.push(this.gifAndpngList[num]);
				}
			}
			// ------- end -------
		}
	}
</script>
<style lang="scss">
	.vip {
		width: 56rpx;
		height: 20rpx;
		margin-top: 5rpx;
		margin-left: 16rpx;
	}

	.closeBnt {
		position: absolute;
		right: 30rpx;
		margin-top: 34rpx;
		width: 30rpx;
		height: 30rpx;
	}

	.numberComment {
		font-size: 26rpx;
		font-weight: 500;
		text-align: center;
		color: #333;
		margin-top: 34rpx;
	}

	.pictrue {
		width: 60rpx;
		height: 60rpx;
		border: 1px solid #fff;
		border-radius: 50rpx;
		margin-top: 20px;
		margin-left: 15px;
	}

	.name {
		font-size: 24rpx;
		font-weight: 500;
		color: #666;
	}

	.time {
		font-size: 12px;
		font-weight: 400;
		color: #999999;
		margin-left: 10px;
		margin-top: 2rpx;
	}

	.like {
		color: #999;
		position: absolute;
		right: 45rpx;
		margin-left: 5rpx;
		width: 26rpx;
		height: 26rpx;
	}

	.likeNum {
		font-size: 22rpx;
		color: #a3a1a4;
		position: absolute;
		right: 22rpx;
		margin-top: 2rpx;
	}

	.childrenPic {
		width: 40rpx;
		height: 40rpx;
		border: 1px solid red;
		border-radius: 50%;
		margin-top: 20px;
	}

	.childrenName {
		font-size: 24rpx;
		font-weight: 500;
		color: #666;
	}

	.childrenLike {
		color: #999;
		position: absolute;
		right: 20rpx;
		width: 27rpx;
		height: 27rpx;
	}

	.childrenLikeNum {
		font-size: 22rpx;
		color: #a3a1a4;
		position: absolute;
		right: 0rpx;
		margin-top: 2rpx;
	}
</style>
